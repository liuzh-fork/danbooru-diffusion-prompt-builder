import{aA as Oe,F as S,G as v,H as w,W as c,M as f,Q as m,u as s,af as H,X as R,at as At,L as k,U as F,V as D,O as z,aB as de,aC as kt,aD as Bt,aE as xt,an as N,v as se,r as T,k as $,R as U,aF as G,aG as K,aH as ze,aI as De,P as te,T as B,aJ as Ge,o as it,s as Pt,n as Me,t as je,I as It,a0 as he,D as Ve,aK as ke,a1 as j,am as Ae,aj as Lt,m as Tt,aL as Vt,S as Rt,av as St}from"./vendor-1.5b05c77f.js";import{E as A,F as C,f as Ot,a as L,b as zt,d as Mt,e as jt,g as Nt,h as ge,i as ot,j as fe,k as Ht,l as lt,m as pe,n as Ut,o as Wt,p as rt,q as ct,r as q,s as Jt,t as W,u as Gt,v as Kt,w as Be,x as xe,y as Qt,z as ie,A as oe,B as Ne,C as ne,D as Yt,G as Xt,H as Zt,I as qt,J as ea,K as dt,L as pt,M as mt,N as _t,O as ht,P as Ke,Q as ft,R as ta,S as aa,T as sa,U as na,V as ua,W as ia,X as Qe,Y as oa,Z as Ye,_ as la,$ as ra,a0 as ca,a1 as da}from"./vendor-2.76b3779b.js";import{t as me,L as He,u as pa,x as ma,A as _a,B as ha,C as fa,D as ve,O as ga,F as Xe,G as P,S as le,H as ya,I as va}from"./vendor-3.462daa70.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))e(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function u(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(a){if(a.ep)return;a.ep=!0;const i=u(a);fetch(a.href,i)}})();Array.prototype.group=function(t){const n={};for(let u=0;u<this.length;u++){const e=this[u],a=t(e,u,this);n[a]===void 0&&(n[a]=[]),n[a].push(e)}return n};const Ea="modulepreload",ba=function(t){return"/"+t},Ze={},g=function(n,u,e){if(!u||u.length===0)return n();const a=document.getElementsByTagName("link");return Promise.all(u.map(i=>{if(i=ba(i),i in Ze)return;Ze[i]=!0;const o=i.endsWith(".css"),d=o?'[rel="stylesheet"]':"";if(!!e)for(let p=a.length-1;p>=0;p--){const _=a[p];if(_.href===i&&(!o||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${d}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":Ea,o||(r.as="script",r.crossOrigin=""),r.href=i,document.head.appendChild(r),o)return new Promise((p,_)=>{r.addEventListener("load",p),r.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>n())},wa=Oe("newEmphasis",!0),Fa=Oe("showRestricted",!1),Ca=Oe("useFixedMultiplier",!1),V=me("settings",{state:()=>({showImage:!1,newEmphasis:wa,showRestricted:Fa,useFixedMultiplier:Ca})}),we=new He({max:50,allowStale:!0,updateAgeOnGet:!0}),J=me("tags",{state:()=>({tags:[],tagsPostCount:{}}),getters:{loaded:t=>t.tags.length>0,categoryHierarchy:t=>{const n=V(),u={},e=t.tags.filter(i=>n.showRestricted||!i.restricted).map(({category:i})=>i.join("/")).filter(i=>!(u[i]=i in u)).sort().map(i=>i.split("/")),a={};for(const i of e){let o=a;for(const[d,l]of i.entries())if(d===i.length-1)o[l]=!0;else{const r=o[l]??{};o[l]||=r,typeof r=="object"&&(o=r)}}return a},tagsByCategory:t=>{const n=V();return t.tags.filter(u=>n.showRestricted||!u.restricted).group(u=>u.category.join("/"))},categorySize:t=>{const n={};for(const u of t.tags){const e=u.category.join("/");n[e]=(n[e]??0)+1}return n},allTags:t=>{const n=V();return Object.fromEntries(t.tags.filter(u=>n.showRestricted||!u.restricted).map(u=>[u.key,u]))},allTagsWithAlias:t=>{const n=V();return Object.fromEntries(t.tags.filter(u=>n.showRestricted||!u.restricted).flatMap(u=>u.alias?[[u.key,u],...u.alias.map(e=>[e,u])]:[[u.key,u]]))},allTagCount:t=>{const n=V();return t.tags.filter(u=>n.showRestricted||!u.restricted).length},tagWithPhotosCount:t=>{const n=V();return t.tags.filter(u=>n.showRestricted||!u.restricted).filter(u=>u.image).length}},actions:{async load(){const t=Object.assign({"../../data/tags/artistic-license.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.a),[]).then(a=>a.default),"../../data/tags/characters.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.c),[]).then(a=>a.default),"../../data/tags/human/actions.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.b),[]).then(a=>a.default),"../../data/tags/human/body_ornament.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.d),[]).then(a=>a.default),"../../data/tags/human/breasts.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.e),[]).then(a=>a.default),"../../data/tags/human/clothes.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.f),[]).then(a=>a.default),"../../data/tags/human/directions.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.g),[]).then(a=>a.default),"../../data/tags/human/ears.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.h),[]).then(a=>a.default),"../../data/tags/human/face.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.i),[]).then(a=>a.default),"../../data/tags/human/hair.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.j),[]).then(a=>a.default),"../../data/tags/human/head_ornament.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.k),[]).then(a=>a.default),"../../data/tags/human/humantype.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.l),[]).then(a=>a.default),"../../data/tags/human/lowerbody.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.m),[]).then(a=>a.default),"../../data/tags/human/neck.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.n),[]).then(a=>a.default),"../../data/tags/human/quality.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.q),[]).then(a=>a.default),"../../data/tags/human/shoesock.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.s),[]).then(a=>a.default),"../../data/tags/human/upperbody.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.u),[]).then(a=>a.default),"../../data/tags/humanities/buildings.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.o),[]).then(a=>a.default),"../../data/tags/humanities/cities.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.p),[]).then(a=>a.default),"../../data/tags/humanities/food/breads.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.r),[]).then(a=>a.default),"../../data/tags/humanities/food/condiments.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.t),[]).then(a=>a.default),"../../data/tags/humanities/food/dairy.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.v),[]).then(a=>a.default),"../../data/tags/humanities/food/drink.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.w),[]).then(a=>a.default),"../../data/tags/humanities/food/fruit.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.x),[]).then(a=>a.default),"../../data/tags/humanities/food/meal.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.y),[]).then(a=>a.default),"../../data/tags/humanities/food/meat.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.z),[]).then(a=>a.default),"../../data/tags/humanities/food/sweets.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.A),[]).then(a=>a.default),"../../data/tags/humanities/food/vegetable.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.B),[]).then(a=>a.default),"../../data/tags/humanities/indoors.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.C),[]).then(a=>a.default),"../../data/tags/humanities/outdoors.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.D),[]).then(a=>a.default),"../../data/tags/image-composition/articles.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.E),[]).then(a=>a.default),"../../data/tags/image-composition/background.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.F),[]).then(a=>a.default),"../../data/tags/image-composition/censorship.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.G),[]).then(a=>a.default),"../../data/tags/image-composition/color.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.H),[]).then(a=>a.default),"../../data/tags/image-composition/composition.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.I),[]).then(a=>a.default),"../../data/tags/image-composition/effects.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.J),[]).then(a=>a.default),"../../data/tags/image-composition/format.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.K),[]).then(a=>a.default),"../../data/tags/image-composition/perspective.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.L),[]).then(a=>a.default),"../../data/tags/image-composition/style.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.M),[]).then(a=>a.default),"../../data/tags/items.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.N),[]).then(a=>a.default),"../../data/tags/natural/flowers.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.O),[]).then(a=>a.default),"../../data/tags/natural/outdoors.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.P),[]).then(a=>a.default),"../../data/tags/natural/sky.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.Q),[]).then(a=>a.default),"../../data/tags/restricted/r18-t1.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.R),[]).then(a=>a.default),"../../data/tags/restricted/r18-t2.yaml":()=>g(()=>import("./data-1.fdb824c0.js").then(a=>a.S),[]).then(a=>a.default)}),n=await Promise.all(Object.values(t).map(a=>a())),u=(await g(()=>import("./data-1.fdb824c0.js").then(a=>a.T),[])).default,e={tags:n.flatMap(a=>Object.entries(a.content).map(([i,o])=>({...o,key:i.replaceAll("_"," ").toLowerCase(),category:[...a.category,a.name],restricted:o.restricted||a.restricted}))),tagsPostCount:u};this.$patch(e)},resolve(t){t=t.replaceAll("_"," ").toLowerCase();const n=this.allTagsWithAlias[t];return n?{name:n.originalName,meta:n}:null},searchCategory(t,n){const u=V();if(!this.tagsByCategory[t.join("/")])return[];if(n==="")return this.tagsByCategory[t.join("/")].sort((l,r)=>(this.tagsPostCount[r.key]??0)-(this.tagsPostCount[l.key]??0));const e=n.toLowerCase(),a=e.split(/_|\s/).filter(l=>!!l).sort((l,r)=>r.length-l.length),i=JSON.stringify(["ByCategory",t,a]),o=we.get(i);if(o)return o;const d=a.reduce((l,r)=>l.map(p=>{let _=p.score;return p.key.toLowerCase()===e&&(_+=300),p.key.toLowerCase().includes(r)&&(_+=100),p.name.toLowerCase()===e&&(_+=50),p.name.toLowerCase().includes(r)&&(_+=50),p.alias?.some(E=>E.toLowerCase()===e)&&(_+=90),p.alias?.some(E=>E.toLowerCase().includes(r))&&(_+=70),p.description?.toLowerCase()===r&&(_+=40),p.description?.toLowerCase().includes(r)&&(_+=25),{...p,score:_}}).filter(p=>p.score>0),this.tags.filter(l=>l.category.join("/")===t.join("/")&&(u.showRestricted||!l.restricted)).map(l=>({...l,score:0}))).sort((l,r)=>r.score-l.score);return we.set(i,d),d},searchAll(t){const n=V();if(t==="")return[];const u=t.toLowerCase(),e=u.split(/_|\s/).filter(d=>!!d).sort((d,l)=>l.length-d.length),a=JSON.stringify(["Global",e]),i=we.get(a);if(i)return i;const o=e.reduce((d,l)=>d.map(r=>{let p=r.score;return r.key.toLowerCase()===u&&(p+=300),r.key.toLowerCase().includes(l)&&(p+=100),r.name.toLowerCase()===u&&(p+=50),r.name.toLowerCase().includes(l)&&(p+=50),r.alias?.some(_=>_.toLowerCase()===u)&&(p+=90),r.alias?.some(_=>_.toLowerCase().includes(l))&&(p+=70),r.description?.toLowerCase()===l&&(p+=40),r.description?.toLowerCase().includes(l)&&(p+=25),r.category?.some(_=>_.toLowerCase()===l)&&(p+=15),r.category?.some(_=>_.toLowerCase().includes(l))&&(p+=7),{...r,score:p}}).filter(({score:r})=>r>0),this.tags.filter(d=>n.showRestricted||!d.restricted).map(d=>({...d,score:0}))).sort(({score:d},{score:l})=>l-d);return we.set(a,o),o}}}),Pe=me("presets",{state:()=>({presets:[]}),getters:{loaded:t=>t.presets.length>0,categoryHierarchy:t=>{const n=V(),u={},e=t.presets.filter(i=>n.showRestricted||!i.restricted).map(({name:i,category:o})=>[...o,i].join("/")).filter(i=>!(u[i]=i in u)).sort().map(i=>i.split("/")),a={};for(const i of e){let o=a;for(const[d,l]of i.entries())if(d===i.length-1)o[l]=!0;else{const r=o[l]??{};o[l]||=r,typeof r=="object"&&(o=r)}}return a},categorySize:t=>Object.fromEntries(t.presets.map(({name:n,content:u})=>[n,u.length])),count:t=>{const n=V();return t.presets.filter(u=>n.showRestricted||!u.restricted).map(u=>Object.keys(u.content).length).reduce((u,e)=>u+e,0)}},actions:{async load(){const t=Object.assign({"../../data/presets/nightsky.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.n),[]).then(e=>e.default),"../../data/presets/novelai.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.a),[]).then(e=>e.default),"../../data/presets/the-code-of-quintessence.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.t),[]).then(e=>e.default)}),u={presets:(await Promise.all(Object.values(t).map(e=>e()))).map(e=>{const a={name:e.name,category:e.category,description:e.description,restricted:e.restricted??!1,content:[]};return a.content=Object.entries(e.content).map(([i,o])=>({name:i,description:o.description,categoryInfo:a,content:o.content.map(d=>{const[l,r]=d.split(":");return{tag:l,weight:r?parseFloat(r):1}}),preview:o.preview})),a})};this.$patch(u)},searchPreset(t,n){const u=V(),e=this.presets.find(i=>JSON.stringify(i.category)===JSON.stringify(t.slice(0,-1))&&i.name===t[t.length-1]);return e?!u.showRestricted&&e.restricted?[]:n.toLowerCase().split(/_|\s/).filter(i=>!!i).sort((i,o)=>o.length-i.length).reduce((i,o)=>i.filter(d=>!!(d.name.toLowerCase().includes(o)||d.description?.toLowerCase().includes(o)||d.content?.some(l=>l.tag.toLowerCase().includes(o)))),e.content):[]}}}),Fe=new He({max:50,allowStale:!0,updateAgeOnGet:!0}),_e=me("embeddings",{state:()=>({embeddings:[]}),getters:{loaded:t=>Object.keys(t.embeddings).length>0,categoryHierarchy:t=>{const n=V(),u={},e=t.embeddings.filter(i=>n.showRestricted||!i.restricted).map(({category:i})=>i.join("/")).filter(i=>!(u[i]=i in u)).sort().map(i=>i.split("/")),a={};for(const i of e){let o=a;for(const[d,l]of i.entries())if(d===i.length-1)o[l]=!0;else{const r=o[l]??{};o[l]||=r,typeof r=="object"&&(o=r)}}return a},categorySize:t=>{const n={};for(const u of t.embeddings){const e=u.category.join("/");n[e]=(n[e]??0)+1}return n},count:t=>{const n=V();return t.embeddings.filter(u=>n.showRestricted||!u.restricted).length}},actions:{async load(){const t=Object.assign({"../../data/embeddings/artists/arkn.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.b),[]).then(e=>e.default),"../../data/embeddings/artists/chuoer.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.c),[]).then(e=>e.default),"../../data/embeddings/artists/deadflow.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.d),[]).then(e=>e.default),"../../data/embeddings/artists/huajia-as109.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.h),[]).then(e=>e.default),"../../data/embeddings/artists/hyouuma.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.e),[]).then(e=>e.default),"../../data/embeddings/artists/mda-starou.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.m),[]).then(e=>e.default),"../../data/embeddings/artists/momozu-komamochi.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.f),[]).then(e=>e.default),"../../data/embeddings/artists/na-ga.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.g),[]).then(e=>e.default),"../../data/embeddings/artists/nacho2.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.i),[]).then(e=>e.default),"../../data/embeddings/artists/necomi.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.j),[]).then(e=>e.default),"../../data/embeddings/artists/peko-30k.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.p),[]).then(e=>e.default),"../../data/embeddings/artists/psyche047-7500.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.k),[]).then(e=>e.default),"../../data/embeddings/artists/setmen-2000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.s),[]).then(e=>e.default),"../../data/embeddings/artists/shiratama-2.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.l),[]).then(e=>e.default),"../../data/embeddings/artists/shiratama.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.o),[]).then(e=>e.default),"../../data/embeddings/artists/taodou.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.q),[]).then(e=>e.default),"../../data/embeddings/artists/usacastle.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.u),[]).then(e=>e.default),"../../data/embeddings/artists/yishu.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.y),[]).then(e=>e.default),"../../data/embeddings/bluearchive/alice-tendou.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.r),[]).then(e=>e.default),"../../data/embeddings/date-a-live/kuangsan-promot.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.v),[]).then(e=>e.default),"../../data/embeddings/genshinimpact/bcsz2.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.w),[]).then(e=>e.default),"../../data/embeddings/genshinimpact/hutao-prompt.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.x),[]).then(e=>e.default),"../../data/embeddings/genshinimpact/klee-prompt-16-a-6400.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.z),[]).then(e=>e.default),"../../data/embeddings/genshinimpact/kokomi-prompt.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.A),[]).then(e=>e.default),"../../data/embeddings/genshinimpact/nahida-16.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.B),[]).then(e=>e.default),"../../data/embeddings/genshinimpact/nahida-2.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.C),[]).then(e=>e.default),"../../data/embeddings/genshinimpact/nahida-3000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.D),[]).then(e=>e.default),"../../data/embeddings/genshinimpact/nahida-prompt.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.E),[]).then(e=>e.default),"../../data/embeddings/genshinimpact/nahida.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.F),[]).then(e=>e.default),"../../data/embeddings/genshinimpact/nilou-prompt-20-a-2400.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.G),[]).then(e=>e.default),"../../data/embeddings/genshinimpact/nilou-prompt.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.H),[]).then(e=>e.default),"../../data/embeddings/honkaiimpact/bronya-zaychik-1.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.I),[]).then(e=>e.default),"../../data/embeddings/novels/oshino-shinobu.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.J),[]).then(e=>e.default),"../../data/embeddings/vsinger/luotianyi-v1.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.K),[]).then(e=>e.default),"../../data/embeddings/vsinger/luotianyi-v2.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.L),[]).then(e=>e.default),"../../data/embeddings/vtuber/acetaffy.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.M),[]).then(e=>e.default),"../../data/embeddings/vtuber/amamiya-kokoro.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.N),[]).then(e=>e.default),"../../data/embeddings/vtuber/bella.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.O),[]).then(e=>e.default),"../../data/embeddings/vtuber/diana.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.P),[]).then(e=>e.default),"../../data/embeddings/vtuber/eileen.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.Q),[]).then(e=>e.default)}),u={embeddings:(await Promise.all(Object.values(t).map(e=>e()))).map(e=>({prompt:e.prompt,name:e.name,category:e.category,author:e.author,description:e.description,restricted:e.restricted??!1,modelName:e.modelName,modelHash:e.modelHash,vectorSize:e.vectorSize,steps:e.steps,payloadHash:e.payloadHash,payloadURL:e.payloadURL,suggestPositive:e.suggestPositive,suggestNegative:e.suggestNegative}))};this.$patch(u)},resolve(t){const n=t.slice(0,-7),u=t.slice(-6);return this.embeddings.find(a=>a.prompt===n&&a.payloadHash.slice(0,6)===u)??null},searchCategory(t,n){const u=V();if(n==="")return this.embeddings.filter(l=>l.category.join("/")===t.join("/")&&(u.showRestricted||!l.restricted));const e=n.toLowerCase(),a=e.split(/_|\s/).filter(l=>!!l).sort((l,r)=>r.length-l.length),i=JSON.stringify(["ByCategory",t,a]),o=Fe.get(i);if(o)return o;const d=a.reduce((l,r)=>l.map(p=>{let _=p.score;return p.payloadHash.toLowerCase()===e&&(_+=1e3),p.prompt.toLowerCase()===e&&(_+=100),p.prompt.toLowerCase().includes(r)&&(_+=100),p.name.toLowerCase()===e&&(_+=50),p.name.toLowerCase().includes(r)&&(_+=50),p.modelName.toLowerCase()===e&&(_+=15),p.modelName.toLowerCase().includes(r)&&(_+=15),p.modelHash.toLowerCase()===e&&(_+=20),p.modelHash.toLowerCase()===r&&(_+=20),p.description?.toLowerCase()===r&&(_+=40),p.description?.toLowerCase().includes(r)&&(_+=25),p.author?.toLowerCase()===r&&(_+=40),p.author?.toLowerCase().includes(r)&&(_+=20),{...p,score:_}}).filter(p=>p.score>0),this.embeddings.filter(l=>l.category.join("/")===t.join("/")&&(u.showRestricted||!l.restricted)).map(l=>({...l,score:0}))).sort(({score:l},{score:r})=>r-l);return Fe.set(i,d),d},searchAll(t){const n=V();if(t==="")return[];const u=t.toLowerCase(),e=u.split(/_|\s/).filter(d=>!!d).sort((d,l)=>l.length-d.length),a=JSON.stringify(["Global",e]),i=Fe.get(a);if(i)return i;const o=e.reduce((d,l)=>d.map(r=>{let p=r.score;return r.payloadHash.toLowerCase()===u&&(p+=1e3),r.prompt.toLowerCase()===u&&(p+=100),r.prompt.toLowerCase().includes(l)&&(p+=100),r.name.toLowerCase()===u&&(p+=50),r.name.toLowerCase().includes(l)&&(p+=50),r.modelName.toLowerCase()===l&&(p+=15),r.modelName.toLowerCase().includes(l)&&(p+=15),r.modelHash.toLowerCase()===l&&(p+=20),r.modelHash.toLowerCase()===l&&(p+=20),r.description?.toLowerCase()===l&&(p+=40),r.description?.toLowerCase().includes(l)&&(p+=25),r.author?.toLowerCase()===l&&(p+=40),r.author?.toLowerCase().includes(l)&&(p+=20),r.category?.some(_=>_.toLowerCase()===l)&&(p+=15),r.category?.some(_=>_.toLowerCase().includes(l))&&(p+=7),{...r,score:p}}).filter(r=>r.score>0),this.embeddings.filter(d=>n.showRestricted||!d.restricted).map(d=>({...d,score:0}))).sort(({score:d},{score:l})=>l-d);return Fe.set(a,o),o}}}),Ce=new He({max:50,allowStale:!0,updateAgeOnGet:!0}),Ee=me("hypernetwork",{state:()=>({hypernetworks:[]}),getters:{loaded:t=>Object.keys(t.hypernetworks).length>0,categoryHierarchy:t=>{const n=V(),u={},e=t.hypernetworks.filter(i=>n.showRestricted||!i.restricted).map(({category:i})=>i.join("/")).filter(i=>!(u[i]=i in u)).sort().map(i=>i.split("/")),a={};for(const i of e){let o=a;for(const[d,l]of i.entries())if(d===i.length-1)o[l]=!0;else{const r=o[l]??{};o[l]||=r,typeof r=="object"&&(o=r)}}return a},categorySize:t=>{const n={};for(const u of t.hypernetworks){const e=u.category.join("/");n[e]=(n[e]??0)+1}return n},count:t=>{const n=V();return t.hypernetworks.filter(u=>n.showRestricted||!u.restricted).length}},actions:{async load(){const t=Object.assign({"../../data/hypernetworks/artists/Ryokucha Michi-15000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.R),[]).then(e=>e.default),"../../data/hypernetworks/artists/Ryokucha Michi-20000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.S),[]).then(e=>e.default),"../../data/hypernetworks/artists/Ryokucha Michi-5000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.T),[]).then(e=>e.default),"../../data/hypernetworks/artists/Setmen_A4000_1-22000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.U),[]).then(e=>e.default),"../../data/hypernetworks/artists/Setmen_A4000_1-3000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.V),[]).then(e=>e.default),"../../data/hypernetworks/artists/Setmen_A4000_1-9500.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.W),[]).then(e=>e.default),"../../data/hypernetworks/artists/achromic-20000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.X),[]).then(e=>e.default),"../../data/hypernetworks/artists/bishop-10000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.Y),[]).then(e=>e.default),"../../data/hypernetworks/artists/bishop-20000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.Z),[]).then(e=>e.default),"../../data/hypernetworks/artists/dumbtestnovae-20000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e._),[]).then(e=>e.default),"../../data/hypernetworks/artists/gyokai-zen-1.0-16000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.$),[]).then(e=>e.default),"../../data/hypernetworks/artists/gyokai-zen-1.0-overtrain.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.a0),[]).then(e=>e.default),"../../data/hypernetworks/artists/gyokai-zen-1.0.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.a1),[]).then(e=>e.default),"../../data/hypernetworks/artists/haneru-hn-v1.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.a2),[]).then(e=>e.default),"../../data/hypernetworks/artists/himitsu-20000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.a3),[]).then(e=>e.default),"../../data/hypernetworks/artists/kani-biimu-10000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.a4),[]).then(e=>e.default),"../../data/hypernetworks/artists/kase-daiki-hn-32500.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.a5),[]).then(e=>e.default),"../../data/hypernetworks/artists/kedama-20000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.a6),[]).then(e=>e.default),"../../data/hypernetworks/artists/kinnotama-4000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.a7),[]).then(e=>e.default),"../../data/hypernetworks/artists/kinnotama-v3.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.a8),[]).then(e=>e.default),"../../data/hypernetworks/artists/komone-ushio-27000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.a9),[]).then(e=>e.default),"../../data/hypernetworks/artists/mdastarou-10500.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.aa),[]).then(e=>e.default),"../../data/hypernetworks/artists/mdastarou-27000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ab),[]).then(e=>e.default),"../../data/hypernetworks/artists/mdastarou-3000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ac),[]).then(e=>e.default),"../../data/hypernetworks/artists/mdastarou-7500.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ad),[]).then(e=>e.default),"../../data/hypernetworks/artists/miyase-mahiro-17000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ae),[]).then(e=>e.default),"../../data/hypernetworks/artists/momoko-hn2-7000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.af),[]).then(e=>e.default),"../../data/hypernetworks/artists/muk-512-10000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ag),[]).then(e=>e.default),"../../data/hypernetworks/artists/muk-512-5000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ah),[]).then(e=>e.default),"../../data/hypernetworks/artists/muk-512-7000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ai),[]).then(e=>e.default),"../../data/hypernetworks/artists/nachoneko-hn-2600.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.aj),[]).then(e=>e.default),"../../data/hypernetworks/artists/naga-15000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ak),[]).then(e=>e.default),"../../data/hypernetworks/artists/piromizu-hn-38000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.al),[]).then(e=>e.default),"../../data/hypernetworks/artists/setmen-style-12000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.am),[]).then(e=>e.default),"../../data/hypernetworks/artists/setmen-style-12500.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.an),[]).then(e=>e.default),"../../data/hypernetworks/artists/setmen-style-13500.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ao),[]).then(e=>e.default),"../../data/hypernetworks/artists/testingasanuggyNoVAE-512.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ap),[]).then(e=>e.default),"../../data/hypernetworks/artists/testingasanuggyNoVAE-768.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.aq),[]).then(e=>e.default),"../../data/hypernetworks/artists/testingasanuggyvae.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ar),[]).then(e=>e.default),"../../data/hypernetworks/artists/torisan-10000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.as),[]).then(e=>e.default),"../../data/hypernetworks/artists/torisan-20000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.at),[]).then(e=>e.default),"../../data/hypernetworks/artists/torisan-5000.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.au),[]).then(e=>e.default),"../../data/hypernetworks/artists/yuezhixianren.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.av),[]).then(e=>e.default),"../../data/hypernetworks/azurlane/azur-bache.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.aw),[]).then(e=>e.default),"../../data/hypernetworks/genshinimpact/genshinofficial1.yaml":()=>g(()=>import("./data-2.4b699970.js").then(e=>e.ax),[]).then(e=>e.default)}),u={hypernetworks:(await Promise.all(Object.values(t).map(e=>e()))).map(e=>({prompt:e.prompt,name:e.name,category:e.category,author:e.author,description:e.description,restricted:e.restricted??!1,modelName:e.modelName,modelHash:e.modelHash,steps:e.steps,previewHash:e.previewHash,payloadURL:e.payloadURL,suggestPositive:e.suggestPositive,suggestNegative:e.suggestNegative}))};this.$patch(u)},resolve(t){return this.hypernetworks.find(u=>u.prompt===t||u.name===t)??null},searchCategory(t,n){const u=V();if(n==="")return this.hypernetworks.filter(l=>l.category.join("/")===t.join("/")&&(u.showRestricted||!l.restricted));const e=n.toLowerCase(),a=e.split(/_|\s/).filter(l=>!!l).sort((l,r)=>r.length-l.length),i=JSON.stringify(["ByCategory",t,a]),o=Ce.get(i);if(o)return o;const d=a.reduce((l,r)=>l.map(p=>{let _=p.score;return p.prompt.toLowerCase()===e&&(_+=100),p.prompt.toLowerCase().includes(r)&&(_+=100),p.name.toLowerCase()===e&&(_+=50),p.name.toLowerCase().includes(r)&&(_+=50),p.modelName.toLowerCase()===r&&(_+=15),p.modelName.toLowerCase().includes(r)&&(_+=15),p.modelHash.toLowerCase()===r&&(_+=20),p.modelHash.toLowerCase()===r&&(_+=20),p.description?.toLowerCase()===r&&(_+=40),p.description?.toLowerCase().includes(r)&&(_+=25),p.author?.toLowerCase()===r&&(_+=40),p.author?.toLowerCase().includes(r)&&(_+=20),{...p,score:_}}).filter(p=>p.score>0),this.hypernetworks.filter(l=>l.category.join("/")===t.join("/")&&(u.showRestricted||!l.restricted)).map(l=>({...l,score:0}))).sort(({score:l},{score:r})=>r-l);return Ce.set(i,d),d},searchAll(t){const n=V();if(t==="")return[];const u=t.toLowerCase(),e=u.split(/_|\s/).filter(d=>!!d).sort((d,l)=>l.length-d.length),a=JSON.stringify(["Global",e]),i=Ce.get(a);if(i)return i;const o=e.reduce((d,l)=>d.map(r=>{let p=0;return r.prompt.toLowerCase()===u&&(p+=100),r.prompt.toLowerCase().includes(l)&&(p+=100),r.name.toLowerCase()===u&&(p+=50),r.name.toLowerCase().includes(l)&&(p+=50),r.modelName.toLowerCase()===l&&(p+=15),r.modelName.toLowerCase().includes(l)&&(p+=15),r.modelHash.toLowerCase()===l&&(p+=20),r.modelHash.toLowerCase()===l&&(p+=20),r.description?.toLowerCase()===l&&(p+=40),r.description?.toLowerCase().includes(l)&&(p+=25),r.author?.toLowerCase()===l&&(p+=40),r.author?.toLowerCase().includes(l)&&(p+=20),r.category?.some(_=>_.toLowerCase()===l)&&(p+=12),r.category?.some(_=>_.toLowerCase().includes(l))&&(p+=5),{...r,score:p}}).filter(r=>r.score>0),this.hypernetworks.filter(d=>n.showRestricted||!d.restricted).map(d=>({...d,score:0}))).sort(({score:d},{score:l})=>l-d);return Ce.set(a,o),o}}}),$a={class:"links"},Da={href:"https://novelai.dev/",target:"_blank"},Aa={href:"https://github.com/wfjsw/danbooru-diffusion-prompt-builder",target:"_blank"},ka={href:"https://bot.novelai.dev",target:"_blank"},Ba={href:"https://spell.novelai.dev",target:"_blank"},xa={href:"https://guide.novelai.dev",target:"_blank"},Pa=S({__name:"ExtLinks",setup(t){return(n,u)=>(v(),w("div",$a,[c(s(L),{content:"NovelAI.Dev","show-after":750},{default:f(()=>[m("a",Da,[c(s(A),{link:"",size:"large"},{default:f(()=>[c(s(C),{icon:s(Ot),class:"square-icon"},null,8,["icon"])]),_:1})])]),_:1}),c(s(L),{content:"GitHub","show-after":750},{default:f(()=>[m("a",Aa,[c(s(A),{link:"",size:"large"},{default:f(()=>[c(s(C),{icon:s(zt),class:"square-icon"},null,8,["icon"])]),_:1})])]),_:1}),c(s(L),{content:"\u7FA4\u753B\u56FE\u673A\u5668\u4EBA","show-after":750},{default:f(()=>[m("a",ka,[c(s(A),{link:"",size:"large"},{default:f(()=>[c(s(C),{icon:s(Mt),class:"square-icon"},null,8,["icon"])]),_:1})])]),_:1}),c(s(L),{content:"\u6CD5\u672F\u89E3\u6790","show-after":750},{default:f(()=>[m("a",Ba,[c(s(A),{link:"",size:"large"},{default:f(()=>[c(s(C),{icon:s(jt),class:"square-icon"},null,8,["icon"])]),_:1})])]),_:1}),c(s(L),{content:"\u77E5\u8BC6\u5E93(\u6559\u7A0B)","show-after":750},{default:f(()=>[m("a",xa,[c(s(A),{link:"",size:"large"},{default:f(()=>[c(s(C),{icon:s(Nt),class:"square-icon"},null,8,["icon"])]),_:1})])]),_:1})]))}});const O=(t,n)=>{const u=t.__vccOpts||t;for(const[e,a]of n)u[e]=a;return u},gt=O(Pa,[["__scopeId","data-v-8380c638"]]),Ia={class:"flex"},La={class:"category-name"},Ta={class:"category-size"},Va=S({__name:"SidebarItem",props:{type:null,hierarchy:null,categorySize:null,prefix:{default:""}},setup(t){return(n,u)=>{const e=At("SidebarItem",!0);return v(!0),w(R,null,H(t.hierarchy,(a,i)=>(v(),w(R,{key:i},[a!==!0?(v(),k(s(ge),{key:0,index:`${t.type}/${t.prefix}${i}`},{title:f(()=>[F(D(i),1)]),default:f(()=>[c(e,{type:t.type,hierarchy:a,prefix:`${t.prefix}${i}/`,"category-size":t.categorySize},null,8,["type","hierarchy","prefix","category-size"])]),_:2},1032,["index"])):(v(),k(s(ot),{key:1,index:`${t.type}/${t.prefix}${i}`},{default:f(()=>[m("div",Ia,[m("div",La,D(i),1),m("div",Ta,D(t.categorySize[`${t.prefix}${i}`]),1)])]),_:2},1032,["index"]))],64))),128)}}});const $e=O(Va,[["__scopeId","data-v-88b0c605"]]),Ra={class:"mobile-topbar-el"},Sa=S({__name:"Sidebar",emits:["select"],setup(t,{emit:n}){const u=J(),e=Pe(),a=_e(),i=Ee();function o(d,l){n("select",l)}return(d,l)=>{const r=de("loading");return v(),w(R,null,[m("div",Ra,[c(gt)]),c(s(Ht),{"default-openeds":["tags"],class:"borderless pb-2 fw","default-active":"aboutme",onSelect:o},{default:f(()=>[c(s(ot),{index:"aboutme"},{default:f(()=>[c(s(fe),null,{default:f(()=>[c(s(pa))]),_:1}),F(" \u5173\u4E8E ")]),_:1}),z((v(),k(s(ge),{index:"tags"},{title:f(()=>[c(s(fe),null,{default:f(()=>[c(s(ma))]),_:1}),F(" \u6807\u7B7E ")]),default:f(()=>[c($e,{type:"tags",hierarchy:s(u).categoryHierarchy,"category-size":s(u).categorySize},null,8,["hierarchy","category-size"])]),_:1})),[[r,!s(u).loaded]]),z((v(),k(s(ge),{index:"presets"},{title:f(()=>[c(s(fe),null,{default:f(()=>[c(s(_a))]),_:1}),F(" \u9884\u8BBE ")]),default:f(()=>[c($e,{type:"presets",hierarchy:s(e).categoryHierarchy,"category-size":s(e).categorySize},null,8,["hierarchy","category-size"])]),_:1})),[[r,!s(e).loaded]]),z((v(),k(s(ge),{index:"embeddings"},{title:f(()=>[c(s(fe),null,{default:f(()=>[c(s(ha))]),_:1}),F(" \u5D4C\u5165\u6A21\u578B ")]),default:f(()=>[c($e,{type:"embeddings",hierarchy:s(a).categoryHierarchy,"category-size":s(a).categorySize},null,8,["hierarchy","category-size"])]),_:1})),[[r,!s(a).loaded]]),z((v(),k(s(ge),{index:"hypernetworks"},{title:f(()=>[c(s(fe),null,{default:f(()=>[c(s(fa))]),_:1}),F(" \u8D85\u7F51\u7EDC\u6A21\u578B ")]),default:f(()=>[c($e,{type:"hypernetworks",hierarchy:s(i).categoryHierarchy,"category-size":s(i).categorySize},null,8,["hierarchy","category-size"])]),_:1})),[[r,!s(i).loaded]])]),_:1})],64)}}});const Oa=O(Sa,[["__scopeId","data-v-693b70a0"]]),ee=kt();Bt(ee);xt();const za={class:"feature-switches"},Ma=S({__name:"FeatureSwitches",setup(t){const n=V(),u=N(C,{icon:lt}),e=N(C,{icon:pe}),a=N(C,{icon:Ut}),i=N(C,{icon:Wt}),o=N(C,{icon:rt}),d=N(C,{icon:ct}),l=N("span",{class:"switch-text-icon math-style"},["a",N("sup",{},"x")]),r=N("span",{class:"switch-text-icon"},["+"]);return(p,_)=>(v(),w("div",za,[c(s(L),{content:"\u6697\u9ED1\u6A21\u5F0F","show-after":750},{default:f(()=>[c(s(q),{modelValue:s(ee),"onUpdate:modelValue":_[0]||(_[0]=E=>se(ee)?ee.value=E:null),"active-icon":s(d),"inactive-icon":s(o),"inline-prompt":"",size:"large"},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),c(s(L),{content:"\u663E\u793A\u56FE\u7247","show-after":750},{default:f(()=>[c(s(q),{modelValue:s(n).showImage,"onUpdate:modelValue":_[1]||(_[1]=E=>s(n).showImage=E),"active-icon":s(u),"inactive-icon":s(e),"inline-prompt":"",size:"large"},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),c(s(L),{content:"\u6B65\u8FDB\u901F\u7387","show-after":750},{default:f(()=>[c(s(q),{modelValue:s(n).useFixedMultiplier,"onUpdate:modelValue":_[2]||(_[2]=E=>s(n).useFixedMultiplier=E),"active-icon":s(r),"inactive-icon":s(l),"inline-prompt":"",size:"large"},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),c(s(L),{content:"\u5F3A\u8C03\u7C7B\u578B","show-after":750},{default:f(()=>[c(s(q),{modelValue:s(n).newEmphasis,"onUpdate:modelValue":_[3]||(_[3]=E=>s(n).newEmphasis=E),"active-text":"()","inactive-text":"{}","inline-prompt":"",size:"large"},null,8,["modelValue"])]),_:1}),c(s(L),{content:"\u5206\u7EA7\u9650\u5236","show-after":750},{default:f(()=>[c(s(q),{modelValue:s(n).showRestricted,"onUpdate:modelValue":_[4]||(_[4]=E=>s(n).showRestricted=E),"active-icon":s(i),"inactive-icon":s(a),"inline-prompt":"",class:"restricted-switch",size:"large"},null,8,["modelValue","active-icon","inactive-icon"])]),_:1})]))}});const yt=O(Ma,[["__scopeId","data-v-53203d7c"]]),ja=t=>(G("data-v-a2b8877d"),t=t(),K(),t),Na={class:"left"},Ha=ja(()=>m("span",{class:"app-title text-large font-600 mr-3"}," Danbooru \u6807\u7B7E\u8D85\u5E02 ",-1)),Ua={class:"right split"},Wa={class:"mobile-topbar-orig-el"},Ja=S({__name:"TopBar",props:{search:null},emits:["update:search","expandCategory","expandCart"],setup(t,{emit:n}){const u=t,e=T(!1),a=$({get:()=>u.search,set:i=>n("update:search",i)});return(i,o)=>(v(),w("div",{class:U(["topbar",{"is-search-expanded":e.value}])},[m("div",Na,[c(s(A),{size:"large",text:"",class:"category-cascader",onClick:o[0]||(o[0]=d=>n("expandCategory"))},{default:f(()=>[c(s(C),{icon:s(Jt)},null,8,["icon"])]),_:1}),Ha]),m("div",Ua,[c(s(W),{modelValue:s(a),"onUpdate:modelValue":o[1]||(o[1]=d=>se(a)?a.value=d:null),"prefix-icon":s(ve),class:"search",placeholder:"\u641C\u7D22"},null,8,["modelValue","prefix-icon"]),m("div",Wa,[c(yt,{class:"switches"}),c(gt,{class:"extlinks"})]),c(s(A),{size:"large",text:"",class:"search-cascader",onClick:o[2]||(o[2]=d=>e.value=!e.value)},{default:f(()=>[c(s(C),{icon:s(Gt)},null,8,["icon"])]),_:1}),c(s(A),{size:"large",text:"",class:"cart-cascader",onClick:o[3]||(o[3]=d=>n("expandCart"))},{default:f(()=>[c(s(C),{icon:s(Kt)},null,8,["icon"])]),_:1})])],2))}});const Ga=O(Ja,[["__scopeId","data-v-a2b8877d"]]),Ka=S({__name:"TagPostCount",props:{tag:null},setup(t){const n=t,u=J(),e=ze(),a=$(()=>u.tagsPostCount[n.tag]??0),i=$(()=>a.value===0?"N/A":a.value<1e4?a.value:a.value<1e7?`${Math.floor(a.value/1e3)}k`:a.value<1e10?`${Math.floor(a.value/1e6)}m`:`${Math.floor(a.value/1e9)}b`),o=$(()=>a.value<100?[e.tag_post_count]:a.value<1e4?[e.tag_post_count,e.kilo]:a.value<1e6?[e.tag_post_count,e.mil]:[e.tag_post_count,e.bil]);return(d,l)=>(v(),w("div",{class:U(s(o))},"<"+D(s(i))+">",3))}}),Qa="_tag_post_count_jav0p_1",Ya="_kilo_jav0p_11",Xa="_mil_jav0p_14",Za="_bil_jav0p_17",qa={tag_post_count:Qa,kilo:Ya,mil:Xa,bil:Za},es={$style:qa},ts=O(Ka,[["__cssModules",es]]);function as(t,n,u){for(let e=0;e<u;e++)switch(n){case"(":t=`(${t})`;break;case"{":t=`{${t}}`;break;case"[":t=`[${t}]`;break}return t}function ue(t,n,u){if(u){if(!n.toDecimalPlaces(8).equals(1))return`(${t}:${n.toDecimalPlaces(8)})`}else{const e=n.log(1.05).toInteger().toNumber();if(e!==0)return as(t,e>0?"{":"[",Math.abs(e))}return t}function Z(t,n){return ga.of(...t.reduce((u,e)=>{if(e.type==="tag"||e.type==="embedding"){let a=e.name.replaceAll("\\","\\\\");n?a=a.replaceAll("(","\\(").replaceAll(")","\\)").replaceAll("[","\\[").replaceAll("]","\\]"):a=a.replaceAll("{","\\{").replaceAll("}","\\}").replaceAll("[","\\[").replaceAll("]","\\]"),u.push(ue(a,e.weight,n))}else e.type==="preset"?u.push(Z(e.children,n)):e.type==="alternate"?n?u.push(ue(`[${e.children.map(a=>Z([a],n)).join("|")}]`,e.weight,n)):u.push(ue(Z(e.children,n),e.weight,n)):e.type==="editing"?n?u.push(ue(`[${e.children[0]?.type!=="null"?Z([e.children[0]],n):""}:${e.children[1]?.type!=="null"?Z([e.children[1]],n):""}:${e.breakpoint.toDecimalPlaces(3).toNumber()}]`,e.weight,n)):u.push(ue(Z(e.children,n),e.weight,n)):e.type==="group"&&u.push(ue(Z(e.children,n),e.weight,n));return u},[])).join(", ")}function re(t){return t[0]}const ss={Lexer:void 0,ParserRules:[{name:"Prompt$ebnf$1",symbols:[]},{name:"Prompt$ebnf$1$subexpression$1",symbols:["SinglePrompt",/[,，]/]},{name:"Prompt$ebnf$1",symbols:["Prompt$ebnf$1","Prompt$ebnf$1$subexpression$1"],postprocess:t=>t[0].concat([t[1]])},{name:"Prompt",symbols:["Prompt$ebnf$1","SinglePrompt"],postprocess:([t,n])=>[...t.map(u=>u[0]),n]},{name:"SinglePrompt",symbols:["Plain"],postprocess:re},{name:"SinglePrompt",symbols:["WhitespaceWrapped"],postprocess:re},{name:"SinglePrompt",symbols:["_"],postprocess:()=>null},{name:"WhitespaceWrapped$subexpression$1",symbols:["Emphasized"],postprocess:re},{name:"WhitespaceWrapped",symbols:["_","WhitespaceWrapped$subexpression$1","_"],postprocess:([,t])=>t},{name:"Emphasized",symbols:[{literal:"{"},"Prompt",{literal:"}"}],postprocess:([,t])=>({type:"weight_add",content:t})},{name:"Emphasized",symbols:[{literal:"["},"Prompt",{literal:"]"}],postprocess:([,t])=>({type:"weight_sub",content:t})},{name:"Plain$ebnf$1",symbols:["Char"]},{name:"Plain$ebnf$1",symbols:["Plain$ebnf$1","Char"],postprocess:t=>t[0].concat([t[1]])},{name:"Plain",symbols:["Plain$ebnf$1"],postprocess:([t],n,u)=>t.join("").trim()===""?u:{type:"tag",name:t.join("").replace(/[  \t\n\v\f]/g," ").trim()}},{name:"Char",symbols:[/[^\\\[\]{}:|,，]/],postprocess:re},{name:"Char$string$1",symbols:[{literal:"\\"},{literal:"{"}],postprocess:t=>t.join("")},{name:"Char",symbols:["Char$string$1"],postprocess:()=>"{"},{name:"Char$string$2",symbols:[{literal:"\\"},{literal:"}"}],postprocess:t=>t.join("")},{name:"Char",symbols:["Char$string$2"],postprocess:()=>"}"},{name:"Char$string$3",symbols:[{literal:"\\"},{literal:"["}],postprocess:t=>t.join("")},{name:"Char",symbols:["Char$string$3"],postprocess:()=>"["},{name:"Char$string$4",symbols:[{literal:"\\"},{literal:"]"}],postprocess:t=>t.join("")},{name:"Char",symbols:["Char$string$4"],postprocess:()=>"]"},{name:"Number",symbols:["_","unsigned_decimal","_"],postprocess:([,t])=>t},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","wschar"],postprocess:t=>t[0].concat([t[1]])},{name:"_",symbols:["_$ebnf$1"],postprocess:function(t){return null}},{name:"wschar",symbols:[/[  \t\n\v\f]/],postprocess:re},{name:"unsigned_decimal$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_decimal$ebnf$1",symbols:["unsigned_decimal$ebnf$1",/[0-9]/],postprocess:t=>t[0].concat([t[1]])},{name:"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",symbols:["unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",/[0-9]/],postprocess:t=>t[0].concat([t[1]])},{name:"unsigned_decimal$ebnf$2$subexpression$1",symbols:[{literal:"."},"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1"]},{name:"unsigned_decimal$ebnf$2",symbols:["unsigned_decimal$ebnf$2$subexpression$1"],postprocess:re},{name:"unsigned_decimal$ebnf$2",symbols:[],postprocess:()=>null},{name:"unsigned_decimal",symbols:["unsigned_decimal$ebnf$1","unsigned_decimal$ebnf$2"],postprocess:function(t){return parseFloat(t[0].join("")+(t[1]?"."+t[1][1].join(""):""))}}],ParserStart:"Prompt"};function Y(t){return t[0]}const ns={Lexer:void 0,ParserRules:[{name:"Prompt$ebnf$1",symbols:[]},{name:"Prompt$ebnf$1$subexpression$1",symbols:["SinglePrompt",/[,，]/]},{name:"Prompt$ebnf$1",symbols:["Prompt$ebnf$1","Prompt$ebnf$1$subexpression$1"],postprocess:t=>t[0].concat([t[1]])},{name:"Prompt",symbols:["Prompt$ebnf$1","SinglePrompt"],postprocess:([t,n])=>[...t.map(u=>u[0]),n]},{name:"SinglePrompt",symbols:["Plain"],postprocess:Y},{name:"SinglePrompt",symbols:["WhitespaceWrapped"],postprocess:Y},{name:"SinglePrompt",symbols:["_"],postprocess:()=>null},{name:"WhitespaceWrapped$subexpression$1",symbols:["Emphasized"],postprocess:Y},{name:"WhitespaceWrapped$subexpression$1",symbols:["Editing"],postprocess:Y},{name:"WhitespaceWrapped$subexpression$1",symbols:["Alternate"],postprocess:Y},{name:"WhitespaceWrapped",symbols:["_","WhitespaceWrapped$subexpression$1","_"],postprocess:([,t])=>t},{name:"Emphasized",symbols:[{literal:"("},"Prompt",{literal:")"}],postprocess:([,t])=>({type:"weight_add",content:t})},{name:"Emphasized",symbols:[{literal:"("},"Prompt",{literal:":"},"Number",{literal:")"}],postprocess:([,t,,n])=>({type:"weight_set",content:t,weight:n})},{name:"Emphasized",symbols:[{literal:"["},"Prompt",{literal:"]"}],postprocess:([,t])=>({type:"weight_sub",content:t})},{name:"Editing$ebnf$1$subexpression$1",symbols:["Prompt",{literal:":"}]},{name:"Editing$ebnf$1",symbols:["Editing$ebnf$1$subexpression$1"],postprocess:Y},{name:"Editing$ebnf$1",symbols:[],postprocess:()=>null},{name:"Editing",symbols:[{literal:"["},"Editing$ebnf$1","Prompt",{literal:":"},"Number",{literal:"]"}],postprocess:([,t,n,,u])=>({type:"editing",from:t?.[0]??null,to:n,breakpoint:u})},{name:"Alternate$ebnf$1$subexpression$1",symbols:[{literal:"|"},"Prompt"]},{name:"Alternate$ebnf$1",symbols:["Alternate$ebnf$1$subexpression$1"]},{name:"Alternate$ebnf$1$subexpression$2",symbols:[{literal:"|"},"Prompt"]},{name:"Alternate$ebnf$1",symbols:["Alternate$ebnf$1","Alternate$ebnf$1$subexpression$2"],postprocess:t=>t[0].concat([t[1]])},{name:"Alternate",symbols:[{literal:"["},"Prompt","Alternate$ebnf$1",{literal:"]"}],postprocess:([,t,n])=>({type:"alternate",tags:[t,...n.map(u=>u[1])]})},{name:"Plain$ebnf$1",symbols:["Char"]},{name:"Plain$ebnf$1",symbols:["Plain$ebnf$1","Char"],postprocess:t=>t[0].concat([t[1]])},{name:"Plain",symbols:["Plain$ebnf$1"],postprocess:([t],n,u)=>t.join("").trim()===""?null:{type:"tag",name:t.join("").replace(/[  \t\n\v\f]/g," ").trim()}},{name:"Char",symbols:[/[^\\\[\]():|,，]/],postprocess:Y},{name:"Char$string$1",symbols:[{literal:"\\"},{literal:"("}],postprocess:t=>t.join("")},{name:"Char",symbols:["Char$string$1"],postprocess:()=>"("},{name:"Char$string$2",symbols:[{literal:"\\"},{literal:")"}],postprocess:t=>t.join("")},{name:"Char",symbols:["Char$string$2"],postprocess:()=>")"},{name:"Char$string$3",symbols:[{literal:"\\"},{literal:"["}],postprocess:t=>t.join("")},{name:"Char",symbols:["Char$string$3"],postprocess:()=>"["},{name:"Char$string$4",symbols:[{literal:"\\"},{literal:"]"}],postprocess:t=>t.join("")},{name:"Char",symbols:["Char$string$4"],postprocess:()=>"]"},{name:"Number",symbols:["_","unsigned_decimal","_"],postprocess:([,t])=>t},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","wschar"],postprocess:t=>t[0].concat([t[1]])},{name:"_",symbols:["_$ebnf$1"],postprocess:function(t){return null}},{name:"wschar",symbols:[/[  \t\n\v\f]/],postprocess:Y},{name:"unsigned_decimal$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_decimal$ebnf$1",symbols:["unsigned_decimal$ebnf$1",/[0-9]/],postprocess:t=>t[0].concat([t[1]])},{name:"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",symbols:["unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",/[0-9]/],postprocess:t=>t[0].concat([t[1]])},{name:"unsigned_decimal$ebnf$2$subexpression$1",symbols:[{literal:"."},"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1"]},{name:"unsigned_decimal$ebnf$2",symbols:["unsigned_decimal$ebnf$2$subexpression$1"],postprocess:Y},{name:"unsigned_decimal$ebnf$2",symbols:[],postprocess:()=>null},{name:"unsigned_decimal",symbols:["unsigned_decimal$ebnf$1","unsigned_decimal$ebnf$2"],postprocess:function(t){return parseFloat(t[0].join("")+(t[1]?"."+t[1][1].join(""):""))}}],ParserStart:"Prompt"};function Re(t,n){const u=new Xe.Parser(Xe.Grammar.fromCompiled(n?ns:ss));return u.feed(t),u.results[0]}function vt(t,n,u){const e=J(),a=t.trim().toLowerCase().replaceAll("_"," ");let i=a,o=e.resolve(a);return o||(i=a+"s",o=e.resolve(i)),o||(i=a+"es",o=e.resolve(i)),!o&&a.endsWith("s")&&(i=a.slice(0,-1),o=e.resolve(i)),!o&&a.endsWith("es")&&(i=a.slice(0,-2),o=e.resolve(i)),o?{label:`${a} - ${o.meta.name}`,type:"tag",name:a,category:o.meta.category,weight:u,parent:n,children:null}:{label:a,name:a,type:"tag",category:null,parent:n,children:null,weight:u}}function X(t,n,u){if(t===null)return null;if(t.type==="tag")return vt(t.name,n,u);if(t.type==="weight_add"||t.type==="weight_sub"||t.type==="weight_set"){switch(t.type){case"weight_add":u=u.mul(1.1);break;case"weight_sub":u=u.div(1.1);break;case"weight_set":u=u.mul(t.weight);break}if(t.content.length>1){const e={type:"group",label:"\u6807\u7B7E\u7EC4",weight:u,parent:n,children:null};return e.children=t.content.map(a=>X(a,e,new P(1))),e}else return t.content.length===1?X(t.content[0],n,u):null}else if(t.type==="editing"){const e={type:"editing",label:"\u6807\u7B7E\u66FF\u6362",weight:u,parent:n,children:[],breakpoint:new P(t.breakpoint)};if(t.from===null||t.from.every(a=>a===null))e.children.push({type:"null",label:"\u65E0\u6807\u7B7E",parent:e,children:null});else if(t.from.length===1)e.children.push(X(t.from[0],e,new P(1)));else{const a={type:"group",label:"\u6807\u7B7E\u7EC4",weight:u,parent:e,children:null};a.children=t.from.map(i=>X(i,a,new P(1))),e.children.push(a)}if(t.to===null||t.to.every(a=>a===null))e.children.push({type:"null",label:"\u65E0\u6807\u7B7E",parent:e,children:null});else if(t.to.length===1)e.children.push(X(t.to[0],e,new P(1)));else{const a={type:"group",label:"\u6807\u7B7E\u7EC4",weight:u,parent:e,children:null};a.children=t.to.map(i=>X(i,a,new P(1))),e.children.push(a)}return e}else if(t.type==="alternate"){const e={type:"alternate",label:"\u6807\u7B7E\u8F6E\u8F6C",weight:u,parent:n,children:[]};return e.children=t.tags.map(a=>{if(a.length===0||a.every(i=>i===null))return null;if(a.length===1)return X(a[0],e,new P(1));{const i={type:"group",label:"\u6807\u7B7E\u7EC4",weight:u,parent:e,children:null};return i.children=a.map(o=>X(o,i,new P(1))),i}}).filter(a=>!!a),e}else throw new Error("Unknown node type")}function Se(t,n,u){if(t===null)return null;if(t.type==="tag")return vt(t.name,n,u);if(t.type==="weight_add"||t.type==="weight_sub"){switch(t.type){case"weight_add":u=u.mul(1.1);break;case"weight_sub":u=u.div(1.1);break}if(t.content.length>1){const e={type:"group",label:"\u6807\u7B7E\u7EC4",weight:u,parent:n,children:null};return e.children=t.content.map(a=>Se(a,e,new P(1))),e}else return t.content.length===1?Se(t.content[0],n,u):null}else throw new Error("Unknown node type")}function us(t,n,u){const e=Re(t,u);if(e)for(const a of e){const i=u?X(a,null,new P(1)):Se(a,null,new P(1));i&&n.push(i)}}function ce(t){switch(t.type){case"tag":case"embedding":return t.name;case"preset":case"alternate":case"group":return t.children.flatMap(n=>ce(n));case"editing":return t.children.filter(n=>n.type!=="null").flatMap(n=>ce(n))}}function qe(t,n,u="tag"){const e=t.findIndex(a=>a.type===u&&a.name===n);if(e!==-1)t.splice(e,1);else for(let a=0;a<t.length;a++)if(t[a].type==="preset"){const i=t[a],o=i.parent;if(i.children.findIndex(l=>l.type===u&&l.name===n)!==-1){const l=i.children.filter(r=>r.name!==n).map(r=>({...r,parent:o}));t.splice(a,1,...l)}}else if(t[a].type==="editing"||t[a].type==="alternate"){const i=t[a],o=i.children.findIndex(d=>d.type===u&&d.name===n);if(i.children.splice(o,1),i.children.every(d=>d.type==="null"))t.splice(a,1);else if(i.children.length===1){const d=i.children[0],l=i.parent;(d.type==="tag"||d.type==="embedding")&&(i.type==="editing"?i.children.push({type:"null",label:"\u65E0\u6807\u7B7E",parent:i,children:null}):t.splice(a,1,{...d,parent:l,weight:new P(1)}))}}}function et(t,n){const u=t.indexOf(n);u>-1&&t.splice(u,1)}function tt(t,n,u,e,a){const i=J(),o=_e();if(e("tag",n))return;const d=i.resolve(n);if(d!==null){t.push({label:`${n} - ${d.meta.name}`,type:"tag",name:n,category:d.meta.category,weight:u,children:null,parent:null}),a(n,"tag");return}const l=o.resolve(n);if(l!==null){t.push({label:`[E] ${n} - ${l.name}`,type:"embedding",name:n,category:l.category,weight:u,parent:null,children:null}),a(n,"embedding");return}t.push({label:n,type:"tag",name:n,category:null,weight:u,parent:null,children:null}),a(n,"tag")}function at(t,n,u,e){const a=J(),i=Q(),o=[...n.categoryInfo.category,n.categoryInfo.name];if(u("preset",n.name,o))return;const d={label:`${o.join("/")}/${n.name}`,type:"preset",name:n.name,category:o,weight:new P(1),children:[],parent:null};d.children=n.content.map(({tag:r,weight:p})=>{const _=a.resolve(r);return _?{label:`${r} - ${_.meta.name}`,name:r,type:"tag",category:_.meta.category,weight:new P(p),parent:d,children:null}:{label:r,name:r,type:"tag",category:null,weight:new P(p),parent:d,children:null}}),t.push(d);const l=i.negative.find(r=>r.type==="preset"&&r.name===n.name&&JSON.stringify(r.category)===JSON.stringify(o));l&&e(l)}const Q=me("cart",{state:()=>({positive:[],negative:[]}),getters:{positiveToString:t=>{const n=V();return Z(t.positive,n.newEmphasis)},negativeToString:t=>{const n=V();return Z(t.negative,n.newEmphasis)},positiveTags:t=>le.of(...t.positive.flatMap(ce)),positiveTagsShallow:t=>le.of(...t.positive.filter(({type:n})=>["tag","embedding","preset"].includes(n)).flatMap(ce)),negativeTags:t=>le.of(...t.negative.flatMap(ce)),negativeTagsShallow:t=>le.of(...t.negative.filter(({type:n})=>["tag","embedding","preset"].includes(n)).flatMap(ce)),positivePresets:t=>le.of(...t.positive.filter(n=>n.type==="preset").map(({category:n,name:u})=>JSON.stringify([n,u]))),negativePresets:t=>le.of(...t.negative.filter(n=>n.type==="preset").map(({category:n,name:u})=>JSON.stringify([n,u])))},actions:{existsPositive(t,n,u=null){return t==="tag"||t==="embedding"?this.positiveTagsShallow.includes(n):t==="preset"?this.positivePresets.includes(JSON.stringify([u,n])):!1},existsNegative(t,n,u=null){return t==="tag"||t==="embedding"?this.negativeTagsShallow.includes(n):t==="preset"?this.negativePresets.includes(JSON.stringify([u,n])):!1},appendPositiveTag(t,n=new P(1)){tt(this.positive,t,n,this.existsPositive,this.removeNegativeTag)},removePositiveTag(t,n="tag"){qe(this.positive,t,n)},appendNegativeTag(t,n=new P(1)){tt(this.negative,t,n,this.existsNegative,this.removePositiveTag)},removeNegativeTag(t,n="tag"){qe(this.negative,t,n)},appendPositivePreset(t){at(this.positive,t,this.existsPositive,this.removeNegativePreset)},removePositivePreset(t){const n="label"in t?t:this.positive.find(u=>u.type==="preset"&&u.name===t.name&&JSON.stringify(u.category)===JSON.stringify([...t.categoryInfo.category,t.categoryInfo.name]));et(this.positive,n)},appendNegativePreset(t){at(this.negative,t,this.existsNegative,this.removePositivePreset)},removeNegativePreset(t){const n="label"in t?t:this.negative.find(u=>u.type==="preset"&&u.name===t.name&&JSON.stringify(u.category)===JSON.stringify([...t.categoryInfo.category,t.categoryInfo.name]));et(this.negative,n)},appendCartItem(t,n){this[t].push(n)},removeCartItem(t,n){const u=n.parent?.children??this[t];u.splice(u.indexOf(n),1),n.parent!==null&&(n.parent.type==="preset"&&this.dismissCartItem(t,n.parent),this.convergeToFit(n.parent.parent?.children??this[t]))},dismissCartItem(t,n){const u=n.parent?.children??this[t],e=n.parent,a=n.children.filter(i=>i.type!=="null").map(i=>({...i,parent:e,...i.type!=="group"&&{weight:new P(1)}}));u.splice(u.indexOf(n),1,...a)},clear(){this.$patch({positive:[],negative:[]})},import(t,n,u){us(n,this[t],u)},importClassic(t,n){((e,a)=>{const i=J();let o=new P(1),d=!0;const l=e.trim();if(l==="")return;const r=l.replaceAll("_"," ").split(/\s*,\s*|\s*，\s*/);for(const p of r){let _=null;const E=p.match(/\(([^:]+):(\d+(?:.\d+)?)\)/);if(E){const[h,y]=E.slice(1);_=h,o=new P(y)}else{for(const y of p)if(y==="(")d=!0,o=o.times(1.1);else if(y==="{")d=!1,o=o.times(1.05);else if(y==="[")o=o.times(d?1.1:1.05);else break;const h=p.match(/^[([{]*(.*?)[)\]}]*$/);h&&(_=h[1],_.endsWith("\\")&&(_+=h[h.lastIndexOf(_)+h.length]))}if(_){_=_.replaceAll("\\(","(").replaceAll("\\)",")").replaceAll("\\[","[").replaceAll("\\]","]").replaceAll("\\{","{").replaceAll("\\}","}").toLowerCase();let h=_,y=i.resolve(_);y||(h=_+"s",y=i.resolve(h)),y||(h=_+"es",y=i.resolve(h)),!y&&_.endsWith("s")&&(h=_.slice(0,-1),y=i.resolve(h)),!y&&_.endsWith("es")&&(h=_.slice(0,-2),y=i.resolve(h)),h=y?h:_,a(h,o)}if(E)o=new P(1);else{const h=Array.from(p).reverse();for(let y=0;y<h.length;y++){const b=h[y],x=h[y+1];if(x!=="\\")if(b===")"&&x!=="\\")d=!0,o=o.div(1.1);else if(b==="}")d=!1,o=o.div(1.05);else if(b==="]")o=o.div(d?1.1:1.05);else break;else break}}}})(n,t==="positive"?this.appendPositiveTag:this.appendNegativeTag)},createMixtureFromTag(t,n){const u=n.parent?.children??this[t],e=u.indexOf(n);if(e!==-1){const a={type:"editing",label:"\u6807\u7B7E\u66FF\u6362",breakpoint:new P(0),children:null,weight:new P(1),parent:n.parent??null},{children:i,...o}=n;a.children=[{...o,parent:a,children:null},Array.isArray(i)?{...i[0],parent:a}:{type:"null",label:"\u65E0\u6807\u7B7E",parent:a,children:null}],u.splice(e,1,a)}},determineNextSwitchableMixture(t){return t.type==="editing"?t.children.filter(u=>u.type!=="null").length<2?"group":"alternate":t.type==="alternate"?"group":t.type==="group"?t.children.length<3?"editing":"alternate":null},isMixtureSwitchable(t,n=null){return n===null?this.determineNextSwitchableMixture(t):n===t.type?!1:n==="group"&&t.type!=="group"?t.children.some(u=>u.type!=="null"):n==="editing"&&t.type!=="editing"?t.children.length<3:n==="alternate"&&t.type!=="alternate"?t.children.filter(e=>e.type!=="null").length>1:!1},switchMixtureType(t,n,u=null){const e=n?.parent?.children??(t!==null?this[t]:null);if(e===null)throw new Error("Switching mixture type on null");const a=u??this.determineNextSwitchableMixture(n);if(!a)return;if(this.isMixtureSwitchable(n,a)){if(a==="editing"&&n.type!=="editing"){const o={type:"editing",label:"\u6807\u7B7E\u66FF\u6362",breakpoint:new P(0),children:null,weight:new P(1),parent:n?.parent??null},d=n.children.map(r=>r.type==="group"&&r.children.length===1?{...r.children[0],parent:o}:{...r,parent:o}).slice(0,2);if(d.length===1)d.push({type:"null",label:"\u65E0\u6807\u7B7E",parent:o,children:null});else if(d.length!==2)throw new Error("Invalid state");o.children=d;const l=e.indexOf(n);e.splice(l,1,o)}else if(a==="alternate"&&n.type!=="alternate"){const o={type:"alternate",label:"\u6807\u7B7E\u8F6E\u8F6C",parent:n?.parent??null,children:null,weight:new P(1)};o.children=n.children.filter(l=>l.type!=="null").map(l=>l.type==="group"&&l.children.length===1?{...l.children[0],parent:o}:{...l,parent:o});const d=e.indexOf(n);e.splice(d,1,o)}else if(a==="group"&&n.type!=="group"){const o={type:"group",label:"\u6807\u7B7E\u7EC4",parent:n?.parent??null,children:null,weight:new P(1)};o.children=n.children.filter(l=>l.type!=="null").map(l=>l.type==="group"&&l.children.length===1?{...l.children[0],parent:o}:{...l,parent:o});const d=e.indexOf(n);e.splice(d,1,o)}this.convergeToFit(e)}},convergeToFit(t){const n=t===this.positive||t===this.negative;let u=!0;for(;u;){u=!1;for(let e=0;e<t.length;e++){const{type:a,children:i,parent:o}=t[e];if(n&&o!==null&&(t[e].parent=null,u=!0),i){for(let d=0;d<i.length;d++)i[d].parent!==t[e]&&(i[d].parent=t[e],u=!0);this.convergeToFit(i)}if(a==="editing"){const d=i?.some(p=>p.type!=="null")??!1,l=i?.length===1,r=i?.length>2;d?l?(i.push({type:"null",label:"\u65E0\u6807\u7B7E",parent:t[e],children:null}),u=!0,e--):r&&(this.switchMixtureType(null,t[e],"alternate"),u=!0,e--):(t.splice(e,1),u=!0,e--)}else if(a==="alternate"||a==="group"){const d=i?.length>0,l=i?.length===1;if(!d)t.splice(e,1),u=!0,e--;else if(l&&a!=="group"){const r=i[0];t.splice(e,1,{...r,parent:t[e]}),u=!0,e--}}}}}}}),Et=t=>(G("data-v-21ec4731"),t=t(),K(),t),is={key:0,class:U(["card-image-container"])},os={class:"image-slot"},ls={class:"imagecard-content"},rs={class:"card-header flex-button-container"},cs={class:"tag-header"},ds={class:"tag-name large"},ps={class:"buttons"},ms=Et(()=>m("span",null,"\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",-1)),_s=["href"],hs={key:0,class:"text name"},fs={key:1,class:"text category"},gs={key:2},ys={key:3},vs=Et(()=>m("span",{class:"text"},"\u522B\u540D\uFF1A",-1)),Es={class:"alias-tag flex-button-container"},bs={class:"tag-name"},ws={class:"buttons"},Fs=S({__name:"TagItem",props:{meta:null,showImage:{type:Boolean},showCategory:{type:Boolean,default:!1}},setup(t){const n=t,u=$(()=>n.meta.key),{copy:e,copied:a}=De({source:u}),i=Q(),o=$(()=>typeof n.meta.image=="string"?n.meta.image.startsWith("https://")?n.meta.image:`images/${n.meta.image.slice(0,2)}/${n.meta.image}.webp`:null),d=$(()=>i.existsPositive("tag",n.meta.key)),l=$(()=>i.existsNegative("tag",n.meta.key)),r=$(()=>n.meta?.alias&&n.meta.alias.reduce((h,y)=>(h[y]=i.existsPositive("tag",y),h),{})),p=$(()=>n.meta?.alias&&n.meta.alias.reduce((h,y)=>(h[y]=i.existsNegative("tag",y),h),{}));function _(h=n.meta.key){h===n.meta.key?d.value?i.removePositiveTag(h):i.appendPositiveTag(h):r.value?.[h]?i.removePositiveTag(h):i.appendPositiveTag(h)}function E(h=n.meta.key){h===n.meta.key?l.value?i.removeNegativeTag(h):i.appendNegativeTag(h):p.value?.[h]?i.removeNegativeTag(h):i.appendNegativeTag(h)}return(h,y)=>(v(),k(s(Ne),{"body-style":{padding:"0px"},class:"box-card"},{default:f(()=>[s(o)?z((v(),w("div",is,[c(s(Be),{src:s(o),fit:"cover",loading:"lazy"},{error:f(()=>[m("div",os,[c(s(C),{icon:s(pe),size:"lg"},null,8,["icon"])])]),_:1},8,["src"])],512)),[[te,t.showImage]]):B("",!0),m("div",ls,[m("div",rs,[m("div",cs,[m("code",ds,D(t.meta.key),1),c(ts,{tag:t.meta.key},null,8,["tag"])]),m("div",ps,[c(s(L),{visible:s(a)},{content:f(()=>[ms]),default:f(()=>[c(s(A),{circle:"",type:"primary",onClick:y[0]||(y[0]=b=>s(e)())},{default:f(()=>[c(s(C),{icon:s(xe)},null,8,["icon"])]),_:1})]),_:1},8,["visible"]),t.meta.wikiURL?(v(),w("a",{key:0,href:t.meta.wikiURL,target:"_blank"},[c(s(L),{content:"Danbooru Wiki","show-after":750},{default:f(()=>[c(s(A),{type:"info",circle:""},{default:f(()=>[c(s(C),{icon:s(Qt)},null,8,["icon"])]),_:1})]),_:1})],8,_s)):B("",!0),c(s(L),{content:"\u6211\u60F3\u8981","show-after":750},{default:f(()=>[c(s(A),{type:s(d)?"success":"default",circle:"",onClick:y[1]||(y[1]=b=>_(t.meta.key))},{default:f(()=>[c(s(C),{icon:s(ie)},null,8,["icon"])]),_:1},8,["type"])]),_:1}),c(s(L),{content:"\u6211\u4E0D\u60F3\u8981","show-after":750},{default:f(()=>[c(s(A),{type:s(l)?"danger":"default",circle:"",onClick:y[2]||(y[2]=b=>E(t.meta.key))},{default:f(()=>[c(s(C),{icon:s(oe)},null,8,["icon"])]),_:1},8,["type"])]),_:1})])]),t.meta.name?(v(),w("div",hs,D(t.meta.name),1)):B("",!0),t.showCategory?(v(),w("div",fs," \u7C7B\u522B\uFF1A"+D(t.meta.category.join("/")),1)):B("",!0),t.meta.description?(v(),w("div",gs,[(v(!0),w(R,null,H(t.meta.description.split(`
`),(b,x)=>(v(),w("p",{key:x,class:"text description"},D(b),1))),128))])):B("",!0),t.meta.alias?(v(),w("div",ys,[vs,m("ul",null,[(v(!0),w(R,null,H(t.meta.alias,b=>(v(),w("li",{key:b,class:"alias-tag"},[m("div",Es,[m("div",null,[m("code",bs,D(b),1)]),m("div",ws,[c(s(L),{content:"\u6211\u60F3\u8981","show-after":750},{default:f(()=>[c(s(A),{type:s(r)[b]?"success":"default",circle:"",size:"small",onClick:x=>_(b)},{default:f(()=>[c(s(C),{icon:s(ie)},null,8,["icon"])]),_:2},1032,["type","onClick"])]),_:2},1024),c(s(L),{content:"\u6211\u4E0D\u60F3\u8981","show-after":750},{default:f(()=>[c(s(A),{type:s(p)[b]?"danger":"default",circle:"",size:"small",onClick:x=>E(b)},{default:f(()=>[c(s(C),{icon:s(oe)},null,8,["icon"])]),_:2},1032,["type","onClick"])]),_:2},1024)])])]))),128))])])):B("",!0)])]),_:1}))}});const bt=O(Fs,[["__scopeId","data-v-21ec4731"]]),Cs=Symbol(),$s=Symbol(),Ds=S({__name:"Masonry",props:{bind:null},setup(t){const n=t,u=T(null),e=T(null);{const a=Ge(()=>{he(()=>{e.value?.reloadItems?.(),e.value?.layout?.()})},50),i=Ge(()=>{he(()=>{e.value?.reloadItems?.(),e.value?.layout?.()})},250),o=()=>setTimeout(()=>he(()=>i()),250);Ve(Cs,()=>he(a)),Ve($s,()=>he(i)),it(async()=>{const d=(await g(()=>import("./vendor-3.462daa70.js").then(l=>l.m),["assets/vendor-3.462daa70.js","assets/vendor-1.5b05c77f.js","assets/vendor-2.76b3779b.js","assets/vendor-2.4a753927.css"])).default;e.value=new d(u.value,{gutter:20,transitionDuration:0,percentPosition:!0,initLayout:!1,resize:!1}),window.addEventListener("resize",o),window.addEventListener("orientationchange",o),window.addEventListener("visibilitychange",o),window.addEventListener("focusin",o),a()}),Pt(()=>{window.removeEventListener("resize",o),window.removeEventListener("orientationchange",o),window.removeEventListener("visibilitychange",o),window.removeEventListener("focusin",o),e.value?.destroy?.()}),Me(je(n,"bind"),()=>{a()})}return(a,i)=>(v(),w("div",{ref_key:"container",ref:u,class:"masonry"},[It(a.$slots,"default",{},void 0,!0)],512))}});const Ie=O(Ds,[["__scopeId","data-v-6ceb9e1a"]]),Le=S({setup(t,{slots:n}){const u=T(!1);return it(()=>{u.value=!0}),()=>u.value&&n.default?n.default():null}}),As=S({__name:"TagShow",props:{category:null},setup(t){const n=t,u=V(),e=J(),a=T(null),i=T(""),o=T(20),d=$(()=>e.searchCategory(n.category,i.value)),l=$(()=>d.value.length),r=$(()=>d.value.slice(0,o.value));function p(){o.value+=20}return Me(je(n,"category"),()=>{o.value=20,a.value?.scrollTo({top:0})}),(_,E)=>{const h=de("infinite-scroll");return v(),w(R,null,[m("h1",null,D(t.category.join(" > ")),1),c(s(W),{modelValue:i.value,"onUpdate:modelValue":E[0]||(E[0]=y=>i.value=y),"prefix-icon":s(ve),class:"search",placeholder:"\u641C\u7D22"},null,8,["modelValue","prefix-icon"]),c(s(ne),{ref_key:"scrollRef",ref:a},{default:f(()=>[c(s(Le),null,{default:f(()=>[z((v(),k(Ie,{bind:[s(r),s(u).showImage],"infinite-scroll-disabled":o.value>=s(l),"infinite-scroll-distance":512,"infinite-scroll-delay":10},{default:f(()=>[(v(!0),w(R,null,H(s(r),(y,b,x,M)=>{const I=[y,s(u).showImage];if(M&&M.key===y.name&&ke(M,I))return M;const be=(v(),k(bt,{key:y.name,"show-image":s(u).showImage,meta:y},null,8,["show-image","meta"]));return be.memo=I,be},E,1),128))]),_:1},8,["bind","infinite-scroll-disabled"])),[[h,p]])]),_:1})]),_:1},512)],64)}}});const ks=O(As,[["__scopeId","data-v-def7a8ad"]]),Bs={key:1},xs=S({__name:"ToggleableTag",props:{tag:null,direction:{default:null},type:{default:""}},setup(t){const n=t,u=J(),e=Q(),a=$(()=>n.direction?e.existsPositive("tag",n.tag)?"success":e.existsNegative("tag",n.tag)?"danger":"":n.type),i=u.resolve(n.tag);function o(){if(n.direction==="positive")e.existsPositive("tag",n.tag)?e.removePositiveTag(n.tag,"tag"):e.appendPositiveTag(n.tag);else if(n.direction==="negative")e.existsNegative("tag",n.tag)?e.removeNegativeTag(n.tag,"tag"):e.appendNegativeTag(n.tag);else if(n.direction==="both")e.existsPositive("tag",n.tag)?e.appendNegativeTag(n.tag):e.existsNegative("tag",n.tag)?e.removeNegativeTag(n.tag,"tag"):e.appendPositiveTag(n.tag);else return null}return(d,l)=>(v(),k(s(Yt),{class:U([d.$style.color_fix,d.$style.size_fix,{[d.$style.pointer]:t.direction!==null}]),type:s(a),onClick:l[0]||(l[0]=r=>o())},{default:f(()=>[s(i)?(v(),w(R,{key:0},[m("span",null,D(t.tag),1),m("span",{class:U(d.$style.usn)}," | ",2),m("span",null,D(s(i).meta.name),1)],64)):(v(),w("span",Bs,D(t.tag),1))]),_:1},8,["class","type"]))}}),Ps="_pointer_5axqz_1",Is="_usa_5axqz_5",Ls="_usn_5axqz_9",Ts="_size_fix_5axqz_13",Vs="_color_fix_5axqz_17",Rs={pointer:Ps,usa:Is,usn:Ls,size_fix:Ts,color_fix:Vs},Ss={$style:Rs},ye=O(xs,[["__cssModules",Ss]]),wt=t=>(G("data-v-b6d7b5d0"),t=t(),K(),t),Os={class:"title-container"},zs={class:"title"},Ms={class:"buttons"},js=wt(()=>m("span",null,"\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",-1)),Ns={key:0},Hs=wt(()=>m("div",{class:"tags-title"},"\u5305\u542B\u4EE5\u4E0B\u6807\u7B7E\uFF1A",-1)),Us={class:"tags"},Ws={key:1},Js={class:"image-slot"},Gs=S({__name:"PresetItem",props:{category:null,meta:null},setup(t){const n=t,u=Q(),e=V(),a=T(!1),i=$(()=>u.existsPositive("preset",n.meta.name,n.category)),o=$(()=>u.existsNegative("preset",n.meta.name,n.category));async function d(p=!1){await window.navigator.clipboard.writeText(n.meta.content.map(_=>p?ue(_.tag,new P(_.weight),e.newEmphasis):_.tag).join(", ")),a.value=!0,setTimeout(()=>a.value=!1,1e3)}function l(){i.value?u.removePositivePreset(n.meta):u.appendPositivePreset(n.meta)}function r(){o.value?u.removeNegativePreset(n.meta):u.appendNegativePreset(n.meta)}return(p,_)=>(v(),k(s(qt),null,{title:f(()=>[m("div",Os,[m("div",zs,D(t.meta.name),1),m("div",Ms,[c(s(L),{visible:a.value},{content:f(()=>[js]),default:f(()=>[c(s(A),{circle:"",type:"primary",onClick:_[0]||(_[0]=j(E=>d(!1),["stop"])),onDblclick:_[1]||(_[1]=j(E=>d(!0),["stop"]))},{default:f(()=>[c(s(C),{icon:s(xe)},null,8,["icon"])]),_:1})]),_:1},8,["visible"]),c(s(L),{content:"\u6211\u60F3\u8981","show-after":750},{default:f(()=>[c(s(A),{type:s(i)?"success":"default",circle:"",onClick:j(l,["stop"])},{default:f(()=>[c(s(C),{icon:s(ie)},null,8,["icon"])]),_:1},8,["type","onClick"])]),_:1}),c(s(L),{content:"\u6211\u4E0D\u60F3\u8981","show-after":750},{default:f(()=>[c(s(A),{type:s(o)?"danger":"default",circle:"",onClick:j(r,["stop"])},{default:f(()=>[c(s(C),{icon:s(oe)},null,8,["icon"])]),_:1},8,["type","onClick"])]),_:1})])])]),default:f(()=>[t.meta.description?(v(),w("div",Ns,[(v(!0),w(R,null,H(t.meta.description.split(`
`),E=>(v(),w("p",{key:E,class:"text description"},D(E),1))),128))])):B("",!0),m("div",null,[Hs,m("div",Us,[(v(!0),w(R,null,H(t.meta.content,E=>(v(),k(ye,{key:E.tag,tag:E.tag,size:"large",direction:"both"},null,8,["tag"]))),128))])]),t.meta.preview?(v(),w("div",Ws,[c(s(Zt),{interval:5e3,height:"512px"},{default:f(()=>[(v(!0),w(R,null,H(t.meta.preview,E=>(v(),k(s(Xt),{key:E},{default:f(()=>[c(s(Be),{src:`images/${E.slice(0,2)}/${E}.webp`,fit:"contain",class:"carousel-image"},{error:f(()=>[m("div",Js,[c(s(C),{icon:s(pe),size:"lg"},null,8,["icon"])])]),_:2},1032,["src"])]),_:2},1024))),128))]),_:1})])):B("",!0)]),_:1}))}});const Ks=O(Gs,[["__scopeId","data-v-b6d7b5d0"]]),Qs={key:0,class:"description"},Ys=S({__name:"PresetShow",props:{category:null},setup(t){const n=t,u=Pe(),e=T(""),a=T(30),i=$(()=>u.presets.find(({category:p,name:_})=>JSON.stringify(p)===JSON.stringify(n.category.slice(0,-1))&&_===n.category[n.category.length-1])?.description),o=$(()=>u.searchPreset(n.category,e.value)),d=$(()=>o.value.length),l=$(()=>o.value.slice(0,a.value));function r(){a.value<d.value&&(a.value+=30)}return(p,_)=>{const E=de("infinite-scroll");return v(),w(R,null,[m("h1",null,D(t.category.join(" > ")),1),c(s(W),{modelValue:e.value,"onUpdate:modelValue":_[0]||(_[0]=h=>e.value=h),"prefix-icon":s(ve),class:"search",placeholder:"\u641C\u7D22"},null,8,["modelValue","prefix-icon"]),c(s(ne),null,{default:f(()=>[s(i)&&e.value===""?(v(),w("div",Qs,[(v(!0),w(R,null,H(s(i).split(`
`),(h,y)=>(v(),w("p",{key:y},D(h),1))),128))])):B("",!0),z((v(),k(s(ea),{"infinite-scroll-disabled":a.value>=s(d),"infinite-scroll-distance":128,"infinite-scroll-delay":10},{default:f(()=>[(v(!0),w(R,null,H(s(l),(h,y,b,x)=>{const M=[h];if(x&&x.key===h.name&&ke(x,M))return x;const I=(v(),k(Ks,{key:h.name,category:t.category,meta:h},null,8,["category","meta"]));return I.memo=M,I},_,1),128))]),_:1},8,["infinite-scroll-disabled"])),[[E,r]])]),_:1})],64)}}});const Xs=O(Ys,[["__scopeId","data-v-83019e65"]]),Ue=t=>(G("data-v-fdde32d4"),t=t(),K(),t),Zs={key:0,class:U(["card-image-container"])},qs={class:"image-slot"},en={class:"imagecard-content"},tn={class:"card-header flex-button-container"},an={class:"tag-header"},sn={class:"tag-name large"},nn={class:"buttons-group"},un={class:"big-download-button"},on=["href","download"],ln={class:"buttons"},rn=Ue(()=>m("span",null,"\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",-1)),cn={key:0,class:"text name"},dn={key:1,class:"text category"},pn={key:2,class:"text author"},mn={key:3,class:"text description"},_n={key:4,class:"text meta"},hn={key:5,class:"text meta"},fn={key:6,class:"text meta"},gn={key:7,class:"tag-suggestion"},yn=Ue(()=>m("div",null,"\u63A8\u8350\u6B63\u5411\u6807\u7B7E\uFF1A",-1)),vn={class:"tags"},En={key:8,class:"tag-suggestion"},bn=Ue(()=>m("div",null,"\u63A8\u8350\u53CD\u5411\u6807\u7B7E",-1)),wn={class:"tags"},Fn=S({__name:"EmbeddingItem",props:{data:null,showCategory:{type:Boolean,default:!1},showImage:{type:Boolean}},setup(t){const n=t,u=$(()=>`${n.data.prompt}-${n.data.payloadHash.slice(0,6)}`),{copy:e,copied:a}=De({source:u.value}),i=Q(),o=$(()=>{const h=n.data.payloadHash;return`embeddings/${h.slice(0,2)}/${h}.preview.webp`}),d=$(()=>{if(n.data.payloadURL)return n.data.payloadURL;const h=n.data.payloadHash;return`embeddings/${h.slice(0,2)}/${h}.webp`}),l=$(()=>`${u.value}.webp`),r=$(()=>i.existsPositive("embedding",u.value)),p=$(()=>i.existsNegative("embedding",u.value));function _(h=u.value){r.value?i.removePositiveTag(h,"embedding"):i.appendPositiveTag(h)}function E(h=u.value){p.value?i.removeNegativeTag(h,"embedding"):i.appendNegativeTag(h)}return(h,y)=>(v(),k(s(Ne),{"body-style":{padding:"0px"},class:"box-card"},{default:f(()=>[s(o)?z((v(),w("div",Zs,[c(s(Be),{src:s(o),fit:"cover",loading:"lazy"},{error:f(()=>[m("div",qs,[c(s(C),{icon:s(pe),size:"lg"},null,8,["icon"])])]),_:1},8,["src"])],512)),[[te,t.showImage]]):B("",!0),m("div",en,[m("div",tn,[m("div",an,[m("code",sn,D(s(u)),1)]),m("div",nn,[m("div",un,[m("a",{href:s(d),download:s(l),target:"_blank",class:"text-decoration-none"},[c(s(A),{type:"warning",color:"#533F20",round:"",class:"download-btn"},{default:f(()=>[c(s(C),{icon:s(dt),class:"icon"},null,8,["icon"]),F(" \u4E0B\u8F7D\u6A21\u578B ")]),_:1})],8,on)]),m("div",ln,[c(s(L),{visible:s(a)},{content:f(()=>[rn]),default:f(()=>[c(s(A),{circle:"",type:"primary",onClick:y[0]||(y[0]=b=>s(e)())},{default:f(()=>[c(s(C),{icon:s(xe)},null,8,["icon"])]),_:1})]),_:1},8,["visible"]),c(s(L),{content:"\u6211\u60F3\u8981","show-after":750},{default:f(()=>[c(s(A),{type:s(r)?"success":"default",circle:"",onClick:y[1]||(y[1]=b=>_(s(u)))},{default:f(()=>[c(s(C),{icon:s(ie)},null,8,["icon"])]),_:1},8,["type"])]),_:1}),c(s(L),{content:"\u6211\u4E0D\u60F3\u8981","show-after":750},{default:f(()=>[c(s(A),{type:s(p)?"danger":"default",circle:"",onClick:y[2]||(y[2]=b=>E(s(u)))},{default:f(()=>[c(s(C),{icon:s(oe)},null,8,["icon"])]),_:1},8,["type"])]),_:1})])])]),t.data.name?(v(),w("div",cn,D(t.data.name),1)):B("",!0),t.showCategory?(v(),w("div",dn," \u7C7B\u522B\uFF1A"+D(t.data.category.join("/")),1)):B("",!0),t.data.author?(v(),w("div",pn," \u6765\u6E90\uFF1A"+D(t.data.author),1)):B("",!0),t.data.description?(v(),w("p",mn,D(t.data.description),1)):B("",!0),t.data.modelName?(v(),w("div",_n,[F(" \u6A21\u578B\u540D\uFF1A"),m("code",null,D(t.data.modelName),1),F(" ("),m("code",null,D(t.data.modelHash),1),F(") ")])):B("",!0),t.data.vectorSize?(v(),w("div",hn," \u5411\u91CF\u6570\u91CF\uFF1A"+D(t.data.vectorSize),1)):B("",!0),t.data.steps?(v(),w("div",fn," \u8BAD\u7EC3\u6B65\u6570\uFF1A"+D(t.data.steps),1)):B("",!0),t.data.suggestPositive?(v(),w("div",gn,[yn,m("div",vn,[(v(!0),w(R,null,H(t.data.suggestPositive,b=>(v(),k(ye,{key:b,tag:b,size:"default",direction:"positive"},null,8,["tag"]))),128))])])):B("",!0),t.data.suggestNegative?(v(),w("div",En,[bn,m("div",wn,[(v(!0),w(R,null,H(t.data.suggestNegative,b=>(v(),k(ye,{key:b,tag:b,size:"default",direction:"negative"},null,8,["tag"]))),128))])])):B("",!0)])]),_:1}))}});const Ft=O(Fn,[["__scopeId","data-v-fdde32d4"]]),Cn=S({__name:"EmbeddingShow",props:{category:null},setup(t){const n=t,u=V(),e=_e(),a=T(""),i=T(30),o=$(()=>e.searchCategory(n.category,a.value)),d=$(()=>o.value.length),l=$(()=>o.value.slice(0,i.value));function r(){i.value<d.value&&(i.value+=30)}return(p,_)=>{const E=de("infinite-scroll");return v(),w(R,null,[m("h1",null,D(t.category.join(" > ")),1),c(s(W),{modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=h=>a.value=h),"prefix-icon":s(ve),class:"search",placeholder:"\u641C\u7D22"},null,8,["modelValue","prefix-icon"]),c(s(ne),null,{default:f(()=>[c(s(Le),null,{default:f(()=>[z((v(),k(Ie,{bind:[s(l),s(u).showImage],"infinite-scroll-disabled":i.value>=s(d),"infinite-scroll-distance":512,"infinite-scroll-delay":10},{default:f(()=>[(v(!0),w(R,null,H(s(l),(h,y,b,x)=>{const M=[h,s(u).showImage];if(x&&x.key===h.payloadHash&&ke(x,M))return x;const I=(v(),k(Ft,{key:h.payloadHash,"show-image":s(u).showImage,data:h},null,8,["show-image","data"]));return I.memo=M,I},_,1),128))]),_:1},8,["bind","infinite-scroll-disabled"])),[[E,r]])]),_:1})]),_:1})],64)}}});const $n=O(Cn,[["__scopeId","data-v-93e808db"]]),ae=t=>(G("data-v-340318a5"),t=t(),K(),t),Dn=ae(()=>m("h1",null,"\u5173\u4E8E",-1)),An=ae(()=>m("p",null,"\u8FD9\u662F\u4E00\u4E2A\u7528\u4E8E\u6784\u5EFA Danbooru \u6807\u7B7E\u7EC4\u5408\u7684\u7F51\u7AD9\u3002",-1)),kn=ae(()=>m("p",null,[F(" \u672C\u7AD9\u7684\u6E90\u7801\u4E0E\u6240\u6709\u539F\u59CB\u6570\u636E\u4E8E "),m("a",{href:"https://github.com/wfjsw/danbooru-diffusion-prompt-builder",target:"_blank"},"danbooru-diffusion-prompt-builder @ GitHub"),F(" \u9075\u5FAA GNU AGPL-3.0 \u534F\u8BAE\u5F00\u653E\u3002\u5982\u679C\u60A8\u89C9\u5F97\u672C\u7AD9\u5BF9\u60A8\u6709\u5E2E\u52A9\uFF0C\u8BF7\u5728 GitHub \u4E0A\u70B9\u4E00\u4E2A Star\u3002 \u540C\u65F6\uFF0C\u4E5F\u6B22\u8FCE\u60A8\u901A\u8FC7 "),m("a",{href:"https://github.com/wfjsw/danbooru-diffusion-prompt-builder/issues",target:"_blank"},"GitHub Issues"),F(" \u63D0\u51FA\u95EE\u9898\u5EFA\u8BAE\uFF0C \u6216\u901A\u8FC7 "),m("a",{href:"https://github.com/wfjsw/danbooru-diffusion-prompt-builder/pulls",target:"_blank"},"Pull Request"),F(" \u5BF9\u672C\u7AD9\u8FDB\u884C\u4FEE\u6539\u6216\u8865\u5145\u3002 ")],-1)),Bn=ae(()=>m("p",null,"\u5982\u4F55\u4F7F\u7528\uFF1A",-1)),xn={class:"inline-control"},Pn={class:"inline-control"},In={class:"inline-control"},Ln={class:"inline-control"},Tn={class:"inline-control"},Vn=ae(()=>m("code",null,"()",-1)),Rn=ae(()=>m("code",null,"{}",-1)),Sn={class:"inline-control"},On={class:"inline-control"},zn={class:"inline-control"},Mn={class:"inline-control"},jn={class:"inline-control"},Nn={class:"inline-control"},Hn=ae(()=>m("ul",null,[m("li",null,[m("p",null,[m("b",null,[F("\u6807\u7B7E\u66FF\u6362 ("),m("a",{href:"https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Features#prompt-editing",target:"_blank"},"Prompt Editing"),F("\uFF0C\u53C8\u540D\u5206\u6B65\u6E32\u67D3): ")]),F(" \u8BE5\u6DF7\u5408\u7EC4\u63A5\u53D7\u4E00\u81F3\u4E24\u4E2A\u6807\u7B7E\u548C\u4E00\u4E2A\u767E\u5206\u6570\u3002\u5728\u767E\u5206\u6570\u6240\u4EE3\u8868\u7684\u751F\u6210\u6B65\u6570\u524D\uFF0C\u751F\u6210\u5F15\u64CE\u5C06\u91C7\u7528\u7EC4\u5185\u7B2C\u4E00\u4E2A\u6807\u7B7E\u3002\u5230\u8FBE\u8BE5\u6B65\u6570\u540E\uFF0C\u751F\u6210\u5F15\u64CE\u5C06\u81EA\u52A8\u6539\u4E3A\u91C7\u7528\u7EC4\u5185\u7B2C\u4E8C\u4E2A\u6807\u7B7E\u3002\u8BE5\u6807\u7B7E\u4EC5\u5728 Stable-Diffusion-WebUI \u683C\u5F0F\u4E2D\u53EF\u7528\u3002 ")])]),m("li",null,[m("p",null,[m("b",null,[F("\u6807\u7B7E\u8F6E\u8F6C ("),m("a",{href:"https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Features#alternating-words",target:"_blank"},"Alternating Words"),F("): ")]),F(" \u8BE5\u6DF7\u5408\u7EC4\u63A5\u53D7\u4E24\u4E2A\u6216\u66F4\u591A\u6807\u7B7E\u3002\u5728\u751F\u6210\u8FC7\u7A0B\u4E2D\uFF0C\u751F\u6210\u5F15\u64CE\u5C06\u5728\u751F\u6210\u7684\u6BCF\u4E00\u6B65\u4E2D\u4F9D\u6B21\u8F6E\u6362\u91C7\u7528\u7EC4\u5185\u7684\u6807\u7B7E\u3002\u8BE5\u6807\u7B7E\u4EC5\u5728 Stable-Diffusion-WebUI \u683C\u5F0F\u4E2D\u53EF\u7528\u3002 ")])]),m("li",null,[m("p",null,[m("b",null,"\u6807\u7B7E\u7EC4: "),F(" \u5355\u7EAF\u7684\u4E00\u4E9B\u6807\u7B7E\u7EC4\u6210\u7684\u4E00\u4E2A\u7EC4\u5408\u3002\u8BE5\u6807\u7B7E\u5728 Stable-Diffusion-WebUI \u683C\u5F0F\u4E0E NovelAI \u683C\u5F0F\u4E2D\u5747\u53EF\u7528\u3002 ")])])],-1)),Un=ae(()=>m("li",null,[m("p",null,[F("\u5173\u4E8E \u6807\u7B7E\u6DF7\u5408 ("),m("a",{href:"https://github.com/AUTOMATIC1111/stable-diffusion-webui/#:~:text=Composable%2DDiffusion%2C%20a,a%20penguin%20%3A2.2",target:"_blank"},"Composable-Diffusion"),F(", \u5373 "),m("code",null,"AND"),F(" \u8BED\u6CD5)\uFF1A")]),m("p",null,[F(" \u5BF9\u4E8E\u6807\u7B7E\u6DF7\u5408\u8BED\u6CD5\u7684\u652F\u6301\u5728\u63D0\u4EA4 "),m("a",{href:"https://github.com/wfjsw/danbooru-diffusion-prompt-builder/commit/483896ae32a7504f2359e2f6bab389e49d834613",target:"_blank"},"483896a"),F(" \u88AB\u79FB\u9664\uFF0C \u662F\u7531\u4E8E\u8FD9\u4E2A\u5B9E\u73B0\u5B58\u5728\u4E25\u91CD\u95EE\u9898\uFF0C\u4E0E\u8BE5\u8BED\u6CD5\u7684\u5B9E\u9645\u6548\u679C\u76F8\u80CC\u79BB\u3002\u503C\u5F97\u6CE8\u610F\u7684\u662F\uFF0C"),m("code",null,"AND"),F(" \u8BED\u6CD5\u7684\u4F5C\u7528\u8303\u56F4\u4E3A\u5B8C\u6574\u7684\u63D0\u793A\u8BCD\u8BED\u53E5\uFF0C\u5B83\u7684\u4F18\u5148\u7EA7\u9AD8\u4E8E\u5176\u4ED6\u6240\u6709\u8BED\u6CD5\uFF0C \u4F1A\u5C06\u6574\u4E2A\u8BED\u53E5\u5206\u5207\u4E3A\u591A\u4E2A\u90E8\u5206\u5E76\u5206\u522B\u9001\u5F80\u540E\u7EED\u5904\u7406\u8FC7\u7A0B\u3002\u56E0\u6B64\uFF0C\u4F7F\u7528\u62EC\u53F7\u3001\u9017\u53F7\u7B49\u5B57\u7B26\u8BD5\u56FE\u9650\u5B9A "),m("code",null,"AND"),F(" \u4F5C\u7528\u8303\u56F4\u3001\u6216\u662F\u5C06\u5176\u5D4C\u5957\u5728\u5176\u4ED6\u590D\u6742\u8BED\u53E5\u4E2D\u7684\u884C\u4E3A\u5747\u662F\u65E0\u6548\u7684\u3002 \u5728 "),m("code",null,"AND"),F(" \u5206\u9694\u7B26\u524D\u540E\u90FD\u5E94\u5F53\u662F\u5B8C\u6574\u7684\u63D0\u793A\u8BCD\u8BED\u53E5\u3002\u56E0\u6B64\uFF0C\u5728\u914D\u5408 "),m("code",null,"AND"),F(" \u8BED\u6CD5\u4F7F\u7528 Danbooru \u6807\u7B7E\u8D85\u5E02\u65F6\uFF0C\u60A8\u5E94\u5F53\u5206\u522B\u5904\u7406 "),m("code",null,"AND"),F(" \u8BED\u6CD5\u4E24\u4FA7\u7684\u5B50\u53E5\uFF0C \u4F8B\u5982\u5C06\u7ED3\u7B97\u8F93\u51FA\u7ED3\u679C\u624B\u52A8\u4F7F\u7528\u8BE5\u8FDE\u63A5\u8BCD\u62FC\u63A5\uFF0C\u6216\u662F\u5728\u4F7F\u7528\u5BFC\u5165\u529F\u80FD\u65F6\u624B\u52A8\u62C6\u5206 "),m("code",null,"AND"),F(" \u8FDE\u63A5\u8BCD\u4E24\u65C1\u7684\u53E5\u5B50\u5E76\u5206\u522B\u5BFC\u5165\u3002 ")])],-1)),Wn={class:"inline-control"},Jn=ae(()=>m("li",null,[m("p",null," \u5173\u4E8E\u201C\u5BFC\u5165\u6807\u7B7E\u201D\u4E2D\u63D0\u4F9B\u7684\u4E24\u79CD\u89E3\u6790\u5668\uFF1A "),m("ul",null,[m("li",null,[m("p",null,[m("b",null,"\u6734\u7D20\u89E3\u6790\u5668: "),F(" \u65E7\u7248\u624B\u5236\u7B80\u6613\u89E3\u6790\u5668\uFF0C\u53EF\u7528\u4E8E\u89E3\u6790\u5927\u62EC\u53F7\u4E0E\u5C0F\u62EC\u53F7\u6DF7\u5408\u7684\u6807\u7B7E\u3002\u5BF9\u4E8E\u4E0D\u5E73\u8861\u62EC\u53F7\u4E0E\u5947\u602A\u7B26\u53F7\u7684\u5BB9\u9519\u5EA6\u8F83\u9AD8\uFF0C\u5C11\u89C1\u5D29\u6E83\uFF0C\u4F46\u53EF\u80FD\u96BE\u4EE5\u89E3\u6790\u51FA\u51C6\u786E\u7ED3\u679C\u3002\u8BE5\u89E3\u6790\u5668\u65E0\u6CD5\u89E3\u6790\u590D\u6742\u7684\u6DF7\u5408\u7EC4\u3002 ")])]),m("li",null,[m("p",null,[m("b",null,"WebUI / NAI \u8BED\u6CD5\u89E3\u6790\u5668: "),F(" \u4F7F\u7528 Earley DSL \u6784\u5EFA\u7684\u65B0\u7248\u8BED\u6CD5\u5206\u6790\u5668\u3002\u652F\u6301\u51C6\u786E\u89E3\u6790\u590D\u6742\u8BED\u6CD5\uFF0C\u4F46\u4E0D\u652F\u6301\u6DF7\u5408\u62EC\u53F7\u7684\u60C5\u5F62\u3002\u5BB9\u9519\u5EA6\u8F83\u4F4E\uFF0C\u53EF\u80FD\u5B58\u5728\u5361\u6B7B\u7684\u60C5\u51B5\u3002 ")])])]),m("p",null,[F(" \u89E3\u6790\u65F6\u8BF7\u786E\u4FDD\u6807\u7B7E\u4E4B\u95F4\u7528\u9017\u53F7\u9694\u5F00\uFF0C\u4EE5\u4FBF\u51C6\u786E\u533A\u5206\u6807\u7B7E\u8FB9\u754C\u3002\u62EC\u53F7\uFF08\u5305\u62EC\u5927\u62EC\u53F7\u3001\u4E2D\u62EC\u53F7\u3001\u5C0F\u62EC\u53F7\uFF1B\u4F7F\u7528 "),m("kbd",null,"\\"),F(" \u8F6C\u4E49\u7684\u62EC\u53F7\u9664\u5916\uFF09\u5FC5\u987B\u4E0E\u9017\u53F7\u76F8\u90BB\uFF0C\u4E0D\u652F\u6301\u62EC\u53F7\u5728\u6807\u7B7E\u4E2D\u95F4\u7684\u60C5\u5F62\u3002 ")])],-1)),Gn=S({__name:"AboutMe",props:{category:null},setup(t){const n=V(),u=J(),e=Pe(),a=_e(),i=Ee(),o=N(C,{icon:lt}),d=N(C,{icon:pe}),l=N(C,{icon:rt}),r=N(C,{icon:ct}),p=N("span",{class:"switch-text-icon math-style"},["a",N("sup",{},"x")]),_=N("span",{class:"switch-text-icon"},["+"]),E=ya(1678243107264).format("YYYY-MM-DD HH:mm:ss Z"),h="\u751F\u4EA7";return(y,b)=>(v(),k(s(ne),null,{default:f(()=>[Dn,An,m("p",null," \u5F53\u524D\u7248\u672C\u4E3A "+D(s(E))+" \u6784\u5EFA\u7684"+D(s(h))+"\u7248\u672C\u3002\u76EE\u524D\u5171\u6536\u5F55 "+D(s(u).allTagCount)+" \u4E2A\u6807\u7B7E\uFF0C\u5171 "+D(s(u).tagWithPhotosCount)+" \u4E2A\u6807\u7B7E\u6709\u914D\u56FE\u3002 \u5171\u6536\u5F55 "+D(s(e).count)+" \u7EC4\u9884\u8BBE\u6807\u7B7E\u3001"+D(s(a).count)+" \u4E2A\u5D4C\u5165\u6A21\u578B\u3001"+D(s(i).count)+" \u4E2A\u8D85\u7F51\u7EDC\u6A21\u578B\u3002 ",1),kn,Bn,m("ul",null,[m("li",null,[m("p",null,[F(" \u5728\u4FA7\u8FB9\u680F\u4E2D\u9009\u62E9\u4E00\u4E2A\u5206\u7C7B\u3002\u5728\u5206\u7C7B\u6807\u7B7E\u5361\u7247\u4E2D\uFF0C\u60A8\u53EF\u4EE5\u70B9\u51FB "),m("span",xn,[c(s(A),{type:"success",circle:""},{default:f(()=>[c(s(C),{icon:s(ie)},null,8,["icon"])]),_:1})]),F(" \u5C06\u6807\u7B7E\u6DFB\u52A0\u5230\u6B63\u5411\u6807\u7B7E\u5217\u8868\uFF0C\u70B9\u51FB "),m("span",Pn,[c(s(A),{type:"danger",circle:""},{default:f(()=>[c(s(C),{icon:s(oe)},null,8,["icon"])]),_:1})]),F(" \u6DFB\u52A0\u5230\u8D1F\u5411\u6807\u7B7E\u5217\u8868\u3002\u70B9\u51FB\u4E24\u6B21\u53EF\u4ECE\u5217\u8868\u4E2D\u79FB\u9664\u8FD9\u4E2A\u6807\u7B7E\u3002\u70B9\u51FB "),m("span",In,[c(s(A),{circle:"",type:"primary"},{default:f(()=>[c(s(C),{icon:s(xe)},null,8,["icon"])]),_:1})]),F(" \u53EF\u5C06\u5355\u4E2A\u6807\u7B7E\u590D\u5236\u5230\u526A\u8D34\u677F\u3002 ")])]),m("li",null,[m("p",null,[F(" \u7531\u4E8E\u914D\u56FE\u4E2D\u53EF\u80FD\u5305\u542B\u4E0D\u9002\u5B9C\u5DE5\u4F5C\u573A\u5408\u4E0B\u6D4F\u89C8\u7684\u5185\u5BB9\uFF0C\u8BF7\u901A\u8FC7\u8C03\u6574\u53F3\u4E0A\u89D2\u7B2C\u4E8C\u4E2A\u5F00\u5173 "),m("span",Ln,[c(s(q),{modelValue:s(n).showImage,"onUpdate:modelValue":b[0]||(b[0]=x=>s(n).showImage=x),"active-icon":s(o),"inactive-icon":s(d),"inline-prompt":"",size:"large"},null,8,["modelValue","active-icon","inactive-icon"])]),F(" \u9009\u62E9\u662F\u5426\u663E\u793A\u6807\u7B7E\u914D\u56FE\u3002 ")])]),m("li",null,[m("p",null,[F(" \u4F7F\u7528\u53F3\u4E0A\u89D2\u7B2C\u56DB\u4E2A\u5F00\u5173 "),m("span",Tn,[c(s(q),{modelValue:s(n).newEmphasis,"onUpdate:modelValue":b[1]||(b[1]=x=>s(n).newEmphasis=x),"active-text":"()","inactive-text":"{}","inline-prompt":"",size:"large"},null,8,["modelValue"])]),F(" \u53EF\u5728 Stable-Diffusion-WebUI \u683C\u5F0F\u5F3A\u8C03\u7B26\u53F7 "),Vn,F(" \u4E0E NovelAI \u683C\u5F0F\u5F3A\u8C03\u7B26\u53F7 "),Rn,F(" \u4E4B\u95F4\u8FDB\u884C\u9009\u62E9\u3002\u6CE8\u610F\uFF0C \u6539\u53D8\u8FD9\u4E2A\u9009\u9879\u5C06\u4F1A\u4F7F\u5F97\u6BCF\u4E2A\u62EC\u53F7\u7684\u6743\u91CD\u4ECE "+D(s(n).newEmphasis?"1.10":"1.05")+" \u500D\u53D8\u66F4\u4E3A "+D(s(n).newEmphasis?"1.05":"1.10")+" \u500D\u3002 ",1)])]),m("li",null,[m("p",null,[F(" \u5728\u8D2D\u7269\u8F66\u4E2D\uFF0C\u60A8\u53EF\u4EE5\u81EA\u7531\u62D6\u52A8\u6807\u7B7E\uFF0C\u8C03\u6574\u524D\u540E\u987A\u5E8F\u3002\u4F4D\u7F6E\u9760\u524D\u7684\u6807\u7B7E\u62E5\u6709\u66F4\u9AD8\u6743\u91CD\u3002 \u901A\u8FC7\u6539\u53D8\u53F3\u4E0A\u89D2\u7B2C\u4E09\u4E2A\u5F00\u5173 "),m("span",Sn,[c(s(q),{modelValue:s(n).useFixedMultiplier,"onUpdate:modelValue":b[2]||(b[2]=x=>s(n).useFixedMultiplier=x),"active-icon":s(_),"inactive-icon":s(p),"inline-prompt":"",size:"large"},null,8,["modelValue","active-icon","inactive-icon"])]),F(" \u53EF\u5C06\u6B65\u8FDB\u901F\u7387\u5728\u7EBF\u6027\u53D8\u6362\u4E0E\u6307\u6570\u7EA7\u53D8\u6362\u4E4B\u95F4\u9009\u62E9\u3002 \u70B9\u51FB "),m("span",On,[c(s(A),{link:"",type:"primary"},{default:f(()=>[c(s(C),{icon:s(pt)},null,8,["icon"])]),_:1})]),F(" \u6309\u94AE\u5C06\u6807\u7B7E\u6743\u91CD\u63D0\u5347 "+D(s(n).useFixedMultiplier?"5%":(s(n).newEmphasis?"1.10":"1.05")+" \u500D")+"\uFF0C \u70B9\u51FB ",1),m("span",zn,[c(s(A),{link:"",type:"primary"},{default:f(()=>[c(s(C),{icon:s(mt)},null,8,["icon"])]),_:1})]),F(" \u6309\u94AE\u53EF\u5C06\u6807\u7B7E\u6743\u91CD\u964D\u4F4E"+D(s(n).useFixedMultiplier?" 5%":"\u4E3A\u539F\u5148\u7684 "+(s(n).newEmphasis?"90.91":"95.24")+"%")+"\u3002 \u70B9\u51FB ",1),m("span",Mn,[c(s(A),{link:"",type:"primary"},{default:f(()=>[c(s(C),{icon:s(ie)},null,8,["icon"])]),_:1}),c(s(A),{link:"",type:"primary"},{default:f(()=>[c(s(C),{icon:s(oe)},null,8,["icon"])]),_:1})]),F(" \u53EF\u5C06\u6807\u7B7E\u5728\u6B63\u8D1F\u4E24\u4E2A\u65B9\u5411\u4E4B\u95F4\u79FB\u52A8\u3002 \u70B9\u51FB "),m("span",jn,[c(s(A),{link:"",type:"danger"},{default:f(()=>[c(s(C),{icon:s(_t)},null,8,["icon"])]),_:1})]),F(" \u53EF\u5C06\u6807\u7B7E\u4ECE\u8D2D\u7269\u8F66\u4E2D\u5220\u9664\u3002 ")])]),m("li",null,[m("p",null,[F(" \u901A\u8FC7\u70B9\u51FB\u8D2D\u7269\u8F66\u4E2D "),m("span",Nn,[c(s(A),{link:"",type:"primary"},{default:f(()=>[c(s(C),{icon:s(ht)},null,8,["icon"])]),_:1})]),F(" \u6309\u952E\uFF0C\u6216\u5C06\u5176\u4ED6\u6807\u7B7E\u62D6\u52A8\u5230\u67D0\u4E00\u6807\u7B7E\u4E4B\u4E0A\uFF0C\u53EF\u521B\u5EFA\u6DF7\u5408\u7EC4\u3002\u6DF7\u5408\u7EC4\u53EF\u65E0\u9650\u5D4C\u5957\u3002\u5F53\u524D\u5E94\u7528\u652F\u6301\u4E09\u79CD\u6DF7\u5408\u7EC4\uFF1A ")]),Hn]),Un,m("li",null,[m("p",null,[F(" \u4F7F\u7528\u53F3\u4E0A\u89D2\u7B2C\u4E00\u4E2A\u5F00\u5173 "),m("span",Wn,[c(s(q),{modelValue:s(ee),"onUpdate:modelValue":b[3]||(b[3]=x=>se(ee)?ee.value=x:null),"active-icon":s(r),"inactive-icon":s(l),"inline-prompt":"",size:"large"},null,8,["modelValue","active-icon","inactive-icon"])]),F(" \u53EF\u5207\u6362\u4EAE\u8272\u80CC\u666F\u3002 ")])]),Jn])]),_:1}))}});const Kn=O(Gn,[["__scopeId","data-v-340318a5"]]),Qn=/[^,，\\([{\s:|]\s*[([{]|[^\\][\])}]\s*[^,，)\]}\s:|]/;function Yn(t){return t==="("?")":t==="["?"]":"}"}function st(t){const n=[];for(let u=0;u<t.length;u++){const e=u>0?t[u-1]:"",a=t[u];if((a==="("||a==="{"||a==="[")&&e!=="\\")n.push(a);else if((a===")"||a==="}"||a==="]")&&e!=="\\"){const i=n.pop();if(!i&&a===")")return{i:u,expected:"(",char:a};if(!i&&a==="}")return{i:u,expected:"{",char:a};if(!i&&a==="]")return{i:u,expected:"[",char:a};if(i==="("&&a!==")")return{i:u,expected:")",char:a};if(i==="{"&&a!=="}")return{i:u,expected:"}",char:a};if(i==="["&&a!=="]")return{i:u,expected:"]",char:a}}}if(n.length>0){const u=n.map(e=>Yn(e)).join("");return{i:t.length,expected:u,char:"EOF"}}return null}function nt(t){const n=t.match(Qn);return n?{i:n.index,char:n[0]}:null}const We=t=>(G("data-v-625d1607"),t=t(),K(),t),Xn=We(()=>m("p",null," \u6CE8\uFF1A\u7531\u4E8E\u6807\u7B7E\u683C\u5F0F\u5343\u53D8\u4E07\u5316\uFF0C\u4E0D\u80FD\u4FDD\u8BC1\u5B8C\u5168\u6210\u529F\u5BFC\u5165\u3002 \u4E3A\u786E\u4FDD\u6210\u529F\u5BFC\u5165\uFF0C\u8BF7\u68C0\u67E5\u6807\u7B7E\u4E4B\u95F4\u662F\u5426\u4F7F\u7528\u9017\u53F7\u9694\u5F00\u4E14\u62EC\u53F7\u53CC\u5411\u95ED\u5408\u5B8C\u5168\u3002 ",-1)),Zn={class:"tag-positive"},qn=We(()=>m("div",{class:"title"},"\u6B63\u5411\u6807\u7B7E",-1)),eu={class:"tag-negative"},tu=We(()=>m("div",{class:"title"},"\u53CD\u5411\u6807\u7B7E",-1)),au={class:"dialog-footer"},su=S({__name:"ImportDialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:n}){const u=t,e=Q(),a=T(""),i=T(""),o=T(""),d=T(""),l=$({get:()=>u.modelValue,set:E=>n("update:modelValue",E)});function r(){a.value="",i.value="",l.value=!1}async function p(E){const h=a.value.replaceAll(/\r\n|\r|\n/g," ").trim(),y=i.value.replaceAll(/\r\n|\r|\n/g," ").trim();try{await Promise.all([(async()=>{try{const b=st(h);if(b!==null)throw new Error(`\u62EC\u53F7\u4E0D\u5339\u914D\uFF1A\u5728\u7B2C ${b.i} \u4E2A\u5B57\u7B26\u4E0A\uFF0C\u671F\u671B "${b.expected}"\uFF0C\u4F46\u662F\u5B9E\u9645\u9047\u5230 "${b.char}"\u3002`);const x=nt(h);if(x!==null)throw new Error(`\u62EC\u53F7\u5728\u9884\u671F\u4F4D\u7F6E\u5916\uFF1A\u5728\u7B2C ${x.i} \u4E2A\u5B57\u7B26\u4E0A\uFF0C\u671F\u671B\u62EC\u53F7\u8D34\u5408\u9017\u53F7\uFF0C\u5B9E\u9645\u9047\u5230 "${x.char}"\u3002`);Re(a.value,E)}catch(b){throw o.value=b.message,b}})(),(async()=>{try{const b=st(y);if(b!==null)throw new Error(`\u62EC\u53F7\u4E0D\u5339\u914D\uFF1A\u5728\u7B2C ${b.i} \u4E2A\u5B57\u7B26\u4E0A\uFF0C\u671F\u671B "${b.expected}"\uFF0C\u4F46\u662F\u5B9E\u9645\u9047\u5230 "${b.char}"\u3002`);const x=nt(y);if(x!==null)throw new Error(`\u62EC\u53F7\u5728\u9884\u671F\u4F4D\u7F6E\u5916\uFF1A\u5728\u7B2C ${x.i} \u4E2A\u5B57\u7B26\u4E0A\uFF0C\u671F\u671B\u62EC\u53F7\u8D34\u5408\u9017\u53F7\uFF0C\u5B9E\u9645\u9047\u5230 "${x.char}"\u3002`);Re(i.value,E)}catch(b){throw d.value=b.message,b}})()])}catch{return}e.import("positive",h,E),e.import("negative",y,E),l.value=!1}function _(){const E=a.value.replaceAll(/\r\n|\r|\n/g," ").trim(),h=i.value.replaceAll(/\r\n|\r|\n/g," ").trim();e.importClassic("positive",E),e.importClassic("negative",h),l.value=!1}return(E,h)=>(v(),k(s(ft),{modelValue:s(l),"onUpdate:modelValue":h[8]||(h[8]=y=>se(l)?l.value=y:null),title:"\u5BFC\u5165\u6807\u7B7E",width:"50%"},{footer:f(()=>[m("span",au,[c(s(A),{onClick:h[4]||(h[4]=y=>r())},{default:f(()=>[F("\u53D6\u6D88")]),_:1}),c(s(A),{type:"info",onClick:h[5]||(h[5]=y=>_())},{default:f(()=>[F("\u6734\u7D20\u89E3\u6790\u5668")]),_:1}),c(s(A),{type:"primary",onClick:h[6]||(h[6]=y=>p(!1))},{default:f(()=>[F("\u89E3\u6790 NAI \u8BED\u6CD5")]),_:1}),c(s(A),{type:"primary",onClick:h[7]||(h[7]=y=>p(!0))},{default:f(()=>[F("\u89E3\u6790 WebUI \u8BED\u6CD5")]),_:1})])]),default:f(()=>[Xn,m("div",Zn,[qn,c(s(W),{modelValue:a.value,"onUpdate:modelValue":h[0]||(h[0]=y=>a.value=y),type:"textarea",autosize:{minRows:2,maxRows:8},class:"tag-pre",placeholder:"Prompt"},null,8,["modelValue"]),z(c(s(Ke),{title:o.value,type:"error",class:"parse-error",effect:s(ee)?"dark":"light","show-icon":"",onClose:h[1]||(h[1]=y=>o.value="")},null,8,["title","effect"]),[[te,o.value!==""]])]),m("div",eu,[tu,c(s(W),{modelValue:i.value,"onUpdate:modelValue":h[2]||(h[2]=y=>i.value=y),type:"textarea",autosize:{minRows:2,maxRows:8},class:"tag-pre",placeholder:"Negative prompt"},null,8,["modelValue"]),z(c(s(Ke),{title:d.value,type:"error",class:"parse-error",effect:s(ee)?"dark":"light","show-icon":"",onClose:h[3]||(h[3]=y=>d.value="")},null,8,["title","effect"]),[[te,d.value!==""]])])]),_:1},8,["modelValue"]))}});const nu=O(su,[["__scopeId","data-v-625d1607"]]),Te=t=>(G("data-v-ccf40aa9"),t=t(),K(),t),uu={class:"tag-positive"},iu=Te(()=>m("div",{class:"title"},"\u6B63\u5411\u6807\u7B7E",-1)),ou=Te(()=>m("span",null,"\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",-1)),lu={class:"tag-negative"},ru=Te(()=>m("div",{class:"title"},"\u53CD\u5411\u6807\u7B7E",-1)),cu=Te(()=>m("span",null,"\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",-1)),du={class:"dialog-footer"},pu=S({__name:"ResultDialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:n}){const u=t,e=Q(),{copy:a,copied:i}=De({source:$(()=>e.positiveToString)}),{copy:o,copied:d}=De({source:$(()=>e.negativeToString)}),l=$({get:()=>u.modelValue,set:r=>n("update:modelValue",r)});return(r,p)=>(v(),k(s(ft),{modelValue:s(l),"onUpdate:modelValue":p[5]||(p[5]=_=>se(l)?l.value=_:null),title:"\u8F93\u51FA\u7ED3\u679C",width:"50%"},{footer:f(()=>[m("span",du,[c(s(A),{onClick:p[4]||(p[4]=_=>l.value=!1)},{default:f(()=>[F("\u5173\u95ED")]),_:1})])]),default:f(()=>[m("div",uu,[iu,c(s(L),{visible:s(i)},{content:f(()=>[ou]),default:f(()=>[c(s(W),{modelValue:s(e).positiveToString,"onUpdate:modelValue":p[0]||(p[0]=_=>s(e).positiveToString=_),type:"textarea",autosize:{minRows:2,maxRows:8},class:"tag-pre",readonly:"",onDblclick:p[1]||(p[1]=_=>s(a)())},null,8,["modelValue"])]),_:1},8,["visible"])]),m("div",lu,[ru,c(s(L),{visible:s(d)},{content:f(()=>[cu]),default:f(()=>[c(s(W),{modelValue:s(e).negativeToString,"onUpdate:modelValue":p[2]||(p[2]=_=>s(e).negativeToString=_),type:"textarea",autosize:{minRows:2,maxRows:8},class:"tag-pre",readonly:"",onDblclick:p[3]||(p[3]=_=>s(o)())},null,8,["modelValue"])]),_:1},8,["visible"])])]),_:1},8,["modelValue"]))}});const mu=O(pu,[["__scopeId","data-v-ccf40aa9"]]),_u=S({__name:"LiteralWeightIdentifier",props:{weight:null},emits:["update:weight"],setup(t,{emit:n}){const u=t,e=ze(),a=T(u.weight),i=$({get:()=>u.weight.toDecimalPlaces(3).toNumber(),set:E=>{n("update:weight",new P(E))}}),o=T(!1),d=T(null),l=$(()=>u.weight?.toFixed(3)),r=$(()=>u.weight.gte(1)?e.success:e.warning);function p(){a.value=new P(u.weight),o.value=!0,d.value?.focus()}function _(){n("update:weight",a.value),o.value=!1}return(E,h)=>s(i)!==1?(v(),w("span",{key:0,class:U([E.$style.nowrap,s(r)]),onDblclick:p},[z(m("span",null,"x"+D(s(l)),513),[[te,!o.value]]),z(c(s(W),{ref_key:"inputBox",ref:d,modelValue:s(i),"onUpdate:modelValue":h[0]||(h[0]=y=>se(i)?i.value=y:null),class:U(E.$style.edit),size:"small",type:"number",min:0,step:.001,draggable:!1,onBlur:h[1]||(h[1]=y=>o.value=!1),onKeyup:[h[2]||(h[2]=Ae(y=>o.value=!1,["enter"])),Ae(_,["esc"])],onDragstart:j(y=>!1,["stop"])},null,8,["modelValue","class","step","onKeyup","onDragstart"]),[[te,o.value]])],34)):B("",!0)}}),hu="_warning_1tqrc_1",fu="_success_1tqrc_5",gu="_edit_1tqrc_9",yu="_nowrap_1tqrc_14",vu={warning:hu,success:fu,edit:gu,nowrap:yu},Eu={$style:vu},bu=O(_u,[["__cssModules",Eu]]),Ct=Symbol(),wu=S({__name:"PercentageWeightIdentifier",props:{weight:null},emits:["update:weight"],setup(t,{emit:n}){const u=t,e=ze(),a=T(u.weight),i=$({get:()=>u.weight.times(100).toDecimalPlaces(1).toNumber(),set:E=>{n("update:weight",new P(E).div(100))}}),o=T(!1),d=T(null),l=$(()=>i.value?.toFixed(1)),r=$(()=>e.primary);function p(){a.value=new P(u.weight),o.value=!0,d.value?.focus()}function _(){n("update:weight",a.value),o.value=!1}return(E,h)=>(v(),w("span",{class:U([E.$style.nowrap,s(r)]),onDblclick:p},[z(m("span",null,D(s(l))+"%",513),[[te,!o.value]]),z(c(s(W),{ref_key:"inputBox",ref:d,modelValue:s(i),"onUpdate:modelValue":h[0]||(h[0]=y=>se(i)?i.value=y:null),class:U(E.$style.edit),size:"small",type:"number",min:0,step:.1,max:100,draggable:!1,onBlur:h[1]||(h[1]=y=>o.value=!1),onKeyup:[h[2]||(h[2]=Ae(y=>o.value=!1,["enter"])),Ae(_,["esc"])],onDragstart:j(y=>!1,["stop"])},null,8,["modelValue","class","step","onKeyup","onDragstart"]),[[te,o.value]])],34))}}),Fu="_primary_15xqm_1",Cu="_warning_15xqm_5",$u="_success_15xqm_9",Du="_edit_15xqm_13",Au="_nowrap_15xqm_18",ku={primary:Fu,warning:Cu,success:$u,edit:Du,nowrap:Au},Bu={$style:ku},xu=O(wu,[["__cssModules",Bu]]),Pu={class:"flex"},Iu={class:"tag-label"},Lu=["onDblclick"],Tu={class:"tag-button"},Vu=S({__name:"CartItem",props:{node:null,data:null,direction:null},setup(t){const n=t,u=Q(),e=V(),{node:a,data:i}=Lt(n);function o(h,y){const b=h==="positive"?"negative":"positive";u.removeCartItem(b,y),u.appendCartItem(h,y)}function d(h,y){y.type!=="null"&&u.removeCartItem(h,y)}function l(h){i.value.type!=="null"&&(e.useFixedMultiplier?i.value.weight=i.value.weight.add(.05*h):i.value.weight=i.value.weight.times(Math.pow(e.newEmphasis?1.1:1.05,h)))}function r(h){if(i.value.type==="editing"){const y=new P(i.value.breakpoint).add(.05*h);y.greaterThanOrEqualTo(0)&&y.lessThanOrEqualTo(1)&&(i.value.breakpoint=i.value.breakpoint.add(.05*h))}}const p=Tt(Ct);function _(){(i.value.type==="tag"||i.value.type==="embedding")&&p?.(i.value.name)}const E=$({get(){return i.value.parent?.type==="editing"?i.value.parent.children.findIndex(y=>y===i.value)===0?new P(i.value.parent.breakpoint):new P(1).minus(i.value.parent.breakpoint):new P(0)},set(h){i.value.parent?.type==="editing"&&h!==null&&(i.value.parent.children.findIndex(b=>b===i.value)===0?i.value.parent.breakpoint=h:i.value.parent.breakpoint=new P(1).minus(h))}});return(h,y)=>(v(),w("div",Pu,[m("div",Iu,[m("span",{class:"tag-label-text",onDblclick:j(_,["stop"])},D(s(a).label),41,Lu),s(i).type!=="null"?(v(),k(bu,{key:0,weight:s(i).weight,"onUpdate:weight":y[0]||(y[0]=b=>s(i).weight=b),class:"weight-identifier"},null,8,["weight"])):B("",!0),s(i).parent?.type==="editing"?(v(),k(xu,{key:1,weight:s(E),"onUpdate:weight":y[1]||(y[1]=b=>se(E)?E.value=b:null),class:"weight-identifier"},null,8,["weight"])):B("",!0)]),m("div",Tu,[["tag","embedding"].includes(s(i).type)?(v(),k(s(L),{key:0,content:"\u521B\u5EFA\u6DF7\u5408\u7EC4","show-after":750},{default:f(()=>[c(s(A),{link:"",type:"primary",onClick:y[2]||(y[2]=j(()=>(s(i).type==="tag"||s(i).type==="embedding")&&s(u).createMixtureFromTag(t.direction,s(i)),["stop"]))},{default:f(()=>[c(s(C),{icon:s(ht)},null,8,["icon"])]),_:1})]),_:1})):B("",!0),(s(i).type==="editing"||s(i).type==="alternate"||s(i).type==="group")&&s(u).isMixtureSwitchable(s(i))?(v(),k(s(L),{key:1,content:"\u5207\u6362\u6DF7\u5408\u65B9\u5F0F","show-after":750},{default:f(()=>[c(s(A),{link:"",type:"primary",onClick:y[3]||(y[3]=j(b=>{(s(i).type==="editing"||s(i).type==="alternate"||s(i).type==="group")&&s(u).switchMixtureType(t.direction,s(i))},["stop"]))},{default:f(()=>[c(s(C),{icon:s(ta)},null,8,["icon"])]),_:1})]),_:1})):B("",!0),s(i).type==="editing"?(v(),w(R,{key:2},[c(s(L),{content:"\u65AD\u70B9\u540E\u79FB","show-after":750},{default:f(()=>[c(s(A),{link:"",type:"primary",onClick:y[4]||(y[4]=j(b=>r(1),["stop"]))},{default:f(()=>[c(s(C),{icon:s(aa)},null,8,["icon"])]),_:1})]),_:1}),c(s(L),{content:"\u65AD\u70B9\u524D\u79FB","show-after":750},{default:f(()=>[c(s(A),{link:"",type:"primary",onClick:y[5]||(y[5]=j(b=>r(-1),["stop"]))},{default:f(()=>[c(s(C),{icon:s(sa)},null,8,["icon"])]),_:1})]),_:1})],64)):B("",!0),s(i).type!=="null"?(v(),w(R,{key:3},[c(s(L),{content:"\u63D0\u9AD8\u6743\u91CD","show-after":750},{default:f(()=>[c(s(A),{link:"",type:"primary",onClick:y[6]||(y[6]=j(b=>l(1),["stop"]))},{default:f(()=>[c(s(C),{icon:s(pt)},null,8,["icon"])]),_:1})]),_:1}),c(s(L),{content:"\u964D\u4F4E\u6743\u91CD","show-after":750},{default:f(()=>[c(s(A),{link:"",type:"primary",onClick:y[7]||(y[7]=j(b=>l(-1),["stop"]))},{default:f(()=>[c(s(C),{icon:s(mt)},null,8,["icon"])]),_:1})]),_:1})],64)):B("",!0),s(i).parent===null?(v(),w(R,{key:4},[t.direction==="positive"?(v(),k(s(L),{key:0,content:"\u8F6C\u4E3A\u53CD\u5411","show-after":750},{default:f(()=>[c(s(A),{link:"",type:"primary",onClick:y[8]||(y[8]=j(b=>o("negative",s(i)),["stop"]))},{default:f(()=>[c(s(C),{icon:s(oe)},null,8,["icon"])]),_:1})]),_:1})):B("",!0),t.direction==="negative"?(v(),k(s(L),{key:1,content:"\u8F6C\u4E3A\u6B63\u5411","show-after":750},{default:f(()=>[c(s(A),{link:"",type:"primary",onClick:y[9]||(y[9]=j(b=>o("positive",s(i)),["stop"]))},{default:f(()=>[c(s(C),{icon:s(ie)},null,8,["icon"])]),_:1})]),_:1})):B("",!0)],64)):B("",!0),s(i).type!=="null"?(v(),k(s(L),{key:5,content:"\u5220\u9664","show-after":750},{default:f(()=>[c(s(A),{link:"",type:"danger",onClick:y[10]||(y[10]=j(b=>s(i).type!=="null"&&d(t.direction,s(i)),["stop"]))},{default:f(()=>[c(s(C),{icon:s(_t)},null,8,["icon"])]),_:1})]),_:1})):B("",!0)])]))}});const Ru=O(Vu,[["__scopeId","data-v-2537be2c"]]),ut=S({__name:"CartTree",props:{direction:null},setup(t){const n=t,u=Q();function e(){return!0}function a(o,d,l){return!(d.data.type==="preset"&&l==="inner"||d.data.parent?.type==="preset"&&d.data.parent!==o.data.parent||o.data.type==="null"&&d.data.parent!==o.data.parent||d.data.type==="null"&&l==="inner")}function i(o,d,l){let r=!1;if(!(!d||l==="none")){if(o.data.parent?.type==="preset"){const p=o.data;d.data.parent!==p.parent&&u.dismissCartItem(n.direction,p.parent)}else if(o.data.parent?.type==="editing"){const p=o.data;p.type!=="null"&&(p.parent.children.every(_=>_.type==="null")?u.removeCartItem(n.direction,p.parent):p.parent.children.length===1&&p.parent.children.push({type:"null",label:"\u65E0\u6807\u7B7E",children:null,parent:p.parent}))}else(o.data.parent?.type==="alternate"||o.data.parent?.type==="group")&&(o.data.parent.children.length===0?u.removeCartItem(n.direction,o.data.parent):o.data.parent?.type!=="group"&&o.data.parent.children.length===1&&(u.dismissCartItem(n.direction,o.data.parent),r=!0));if(d.data.type==="editing"&&l==="inner"){const p=d.data;if(p.children.length>2){const _=p.children.findIndex(E=>E.type==="null");_!==-1?p.children.splice(_,1):u.switchMixtureType(n.direction,p,"alternate")}}else if((d.data.type==="tag"||d.data.type==="embedding")&&l==="inner"){const p=d.data;u.createMixtureFromTag(n.direction,p)}else if(d.data.parent?.type==="editing"&&l!=="inner"){const p=d.data;if(p.parent.children.length>2){const _=p.parent.children.findIndex(E=>E.type==="null");_!==-1?p.parent.children.splice(_,1):u.switchMixtureType(n.direction,p.parent,"alternate")}}if(!r){if(l==="before"||l==="after"){const p=o.data,_=d.data;p.parent=_.parent}else if(l==="inner"){const p=o.data,_=d.data;p.parent=_}}u.convergeToFit(u[n.direction])}}return(o,d)=>(v(),k(s(na),{"allow-drag":e,"allow-drop":a,data:s(u)[n.direction],class:"cart-tree",draggable:"","auto-expand-parent":"",onNodeDrop:i},{default:f(({node:l,data:r})=>[c(Ru,{node:l,data:r,direction:t.direction},null,8,["node","data","direction"])]),_:1},8,["data"]))}}),Je=t=>(G("data-v-4bd1f994"),t=t(),K(),t),Su={class:"mobile-topbar-el"},Ou={class:"cart-container"},zu=Je(()=>m("h1",{class:"text-center cart-title"},"\u8D2D\u7269\u8F66",-1)),Mu={class:"subcart-container cart-positive-container"},ju=Je(()=>m("h1",null,"\u6211\u60F3\u8981",-1)),Nu={class:"subcart-container cart-negative-container"},Hu=Je(()=>m("h1",null,"\u6211\u4E0D\u60F3\u8981",-1)),Uu={class:"btn-block"},Wu={class:"btn-block mb-bottom"},Ju=S({__name:"Cart",setup(t){const n=Q(),u=T(!1),e=T(!1);async function a(){try{await ia.confirm("\u786E\u5B9A\u8981\u6E05\u7A7A\u8D2D\u7269\u8F66\u5417\uFF1F","\u6E05\u7A7A\u8D2D\u7269\u8F66",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}),n.clear()}catch{}}return(i,o)=>(v(),w(R,null,[m("div",Su,[c(yt)]),m("div",Ou,[zu,c(s(ne),{class:"scrollable"},{default:f(()=>[m("div",Mu,[ju,c(ut,{direction:"positive"})]),m("div",Nu,[Hu,c(ut,{direction:"negative"})])]),_:1}),m("div",Uu,[c(s(ua),{class:"btn-group"},{default:f(()=>[c(s(A),{type:"success",class:"btn",onClick:o[0]||(o[0]=d=>e.value=!0)},{default:f(()=>[F(" \u5BFC\u5165\u6807\u7B7E ")]),_:1}),c(s(A),{type:"danger",class:"btn",onClick:a},{default:f(()=>[F(" \u6E05\u7A7A\u8D2D\u7269\u8F66 ")]),_:1})]),_:1})]),m("div",Wu,[c(s(A),{type:"primary",class:"btn",size:"large",onClick:o[1]||(o[1]=d=>u.value=!0)},{default:f(()=>[F(" \u7ED3\u7B97 ")]),_:1})]),c(nu,{modelValue:e.value,"onUpdate:modelValue":o[2]||(o[2]=d=>e.value=d)},null,8,["modelValue"]),c(mu,{modelValue:u.value,"onUpdate:modelValue":o[3]||(o[3]=d=>u.value=d)},null,8,["modelValue"])])],64))}});const Gu=O(Ju,[["__scopeId","data-v-4bd1f994"]]),$t=t=>(G("data-v-753c359d"),t=t(),K(),t),Ku={key:0,class:U(["card-image-container"])},Qu={class:"image-slot"},Yu={class:"imagecard-content"},Xu={class:"card-header flex-button-container"},Zu={class:"tag-header"},qu={class:"tag-name large"},ei={class:"big-download-button"},ti=["href"],ai={key:0,class:"text name"},si={key:1,class:"text category"},ni={key:2,class:"text author"},ui={key:3,class:"text description"},ii={key:4,class:"text meta"},oi={key:5,class:"text meta"},li={key:6,class:"tag-suggestion"},ri=$t(()=>m("div",null,"\u63A8\u8350\u6B63\u5411\u6807\u7B7E\uFF1A",-1)),ci={class:"tags"},di={key:7,class:"tag-suggestion"},pi=$t(()=>m("div",null,"\u63A8\u8350\u53CD\u5411\u6807\u7B7E",-1)),mi={class:"tags"},_i=S({__name:"HypernetworkItem",props:{data:null,showImage:{type:Boolean},showCategory:{type:Boolean,default:!1}},setup(t){const n=t,u=$(()=>{const a=n.data.previewHash;return a?`images/${a.slice(0,2)}/${a}.webp`:null}),e=$(()=>n.data.payloadURL);return(a,i)=>(v(),k(s(Ne),{"body-style":{padding:"0px"},class:"box-card"},{default:f(()=>[s(u)?z((v(),w("div",Ku,[c(s(Be),{src:s(u),fit:"cover",loading:"lazy"},{error:f(()=>[m("div",Qu,[c(s(C),{icon:s(pe),size:"lg"},null,8,["icon"])])]),_:1},8,["src"])],512)),[[te,t.showImage]]):B("",!0),m("div",Yu,[m("div",Xu,[m("div",Zu,[m("code",qu,D(t.data.prompt),1)]),m("div",ei,[m("a",{href:s(e),target:"_blank",class:"text-decoration-none"},[c(s(A),{type:"warning",color:"#533F20",round:"",class:"download-btn"},{default:f(()=>[c(s(C),{icon:s(dt),class:"icon"},null,8,["icon"]),F(" \u4E0B\u8F7D\u6A21\u578B ")]),_:1})],8,ti)])]),t.data.name?(v(),w("div",ai,D(t.data.name),1)):B("",!0),t.showCategory?(v(),w("div",si," \u7C7B\u522B\uFF1A"+D(t.data.category.join("/")),1)):B("",!0),t.data.author?(v(),w("div",ni," \u6765\u6E90\uFF1A"+D(t.data.author),1)):B("",!0),t.data.description?(v(),w("p",ui,D(t.data.description),1)):B("",!0),t.data.modelName?(v(),w("div",ii,[F(" \u6A21\u578B\u540D\uFF1A"),m("code",null,D(t.data.modelName),1),F(" ("),m("code",null,D(t.data.modelHash),1),F(") ")])):B("",!0),t.data.steps?(v(),w("div",oi," \u8BAD\u7EC3\u6B65\u6570\uFF1A"+D(t.data.steps),1)):B("",!0),t.data.suggestPositive?(v(),w("div",li,[ri,m("div",ci,[(v(!0),w(R,null,H(t.data.suggestPositive,o=>(v(),k(ye,{key:o,tag:o,size:"default",direction:"positive"},null,8,["tag"]))),128))])])):B("",!0),t.data.suggestNegative?(v(),w("div",di,[pi,m("div",mi,[(v(!0),w(R,null,H(t.data.suggestNegative,o=>(v(),k(ye,{key:o,tag:o,size:"default",direction:"negative"},null,8,["tag"]))),128))])])):B("",!0)])]),_:1}))}});const Dt=O(_i,[["__scopeId","data-v-753c359d"]]),hi=t=>(G("data-v-b39d07f5"),t=t(),K(),t),fi=hi(()=>m("h1",null,"\u641C\u7D22\u7ED3\u679C",-1)),gi=S({__name:"TagSearchShow",props:{search:null},setup(t){const n=t,u=V(),e=J(),a=_e(),i=Ee(),o=T(null),d=T(12),l=$(()=>e.searchAll(n.search)),r=$(()=>a.searchAll(n.search)),p=$(()=>i.searchAll(n.search)),_=$(()=>{const b=l.value.map(I=>({type:"tag",data:I,key:I.key,score:I.score})),x=r.value.map(I=>({type:"embedding",data:I,key:I.payloadHash,score:I.score})),M=p.value.map(I=>({type:"hypernetwork",data:I,key:`${I.prompt}-${I.name}-${I.author}-${I.previewHash}`,score:I.score}));return b.concat(x).concat(M).sort(({score:I},{score:be})=>be-I)}),E=$(()=>_.value.length),h=$(()=>_.value.slice(0,d.value));function y(){d.value<E.value&&(d.value+=20)}return Me(je(n,"search"),()=>{d.value=12,o.value?.scrollTo({top:0})}),(b,x)=>{const M=de("infinite-scroll");return v(),w(R,null,[fi,c(s(ne),{ref_key:"scrollRef",ref:o,class:"scrollable"},{default:f(()=>[c(s(Le),null,{default:f(()=>[z((v(),k(Ie,{bind:[s(h),s(u).showImage],"infinite-scroll-disabled":d.value>=s(E),"infinite-scroll-distance":128,"infinite-scroll-delay":10},{default:f(()=>[(v(!0),w(R,null,H(s(h),I=>(v(),w(R,{key:I.key},[I.type==="tag"?(v(),k(bt,{key:0,"show-image":s(u).showImage,meta:I.data,"show-category":""},null,8,["show-image","meta"])):B("",!0),I.type==="embedding"?(v(),k(Ft,{key:1,"show-image":s(u).showImage,data:I.data,"show-category":""},null,8,["show-image","data"])):B("",!0),I.type==="hypernetwork"?(v(),k(Dt,{key:2,"show-image":s(u).showImage,data:I.data,"show-category":""},null,8,["show-image","data"])):B("",!0)],64))),128))]),_:1},8,["bind","infinite-scroll-disabled"])),[[M,y]])]),_:1})]),_:1},512)],64)}}});const yi=O(gi,[["__scopeId","data-v-b39d07f5"]]),vi=S({__name:"HypernetworkShow",props:{category:null},setup(t){const n=t,u=V(),e=Ee(),a=T(""),i=T(30),o=$(()=>e.searchCategory(n.category,a.value)),d=$(()=>o.value.length),l=$(()=>o.value.slice(0,i.value));function r(){i.value<d.value&&(i.value+=30)}return(p,_)=>{const E=de("infinite-scroll");return v(),w(R,null,[m("h1",null,D(t.category.join(" > ")),1),c(s(W),{modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=h=>a.value=h),"prefix-icon":s(ve),class:"search",placeholder:"\u641C\u7D22"},null,8,["modelValue","prefix-icon"]),c(s(ne),null,{default:f(()=>[c(s(Le),null,{default:f(()=>[z((v(),k(Ie,{bind:[s(l),s(u).showImage],"infinite-scroll-disabled":i.value>=s(d),"infinite-scroll-distance":512,"infinite-scroll-delay":10},{default:f(()=>[(v(!0),w(R,null,H(s(l),(h,y,b,x)=>{const M=[h,s(u).showImage];if(x&&x.key===`${h.prompt}-${h.name}-${h.author}-${h.previewHash}`&&ke(x,M))return x;const I=(v(),k(Dt,{key:`${h.prompt}-${h.name}-${h.author}-${h.previewHash}`,"show-image":s(u).showImage,data:h},null,8,["show-image","data"]));return I.memo=M,I},_,1),128))]),_:1},8,["bind","infinite-scroll-disabled"])),[[E,r]])]),_:1})]),_:1})],64)}}});const Ei=O(vi,[["__scopeId","data-v-2bd22275"]]),bi=S({__name:"App",setup(t){const n=T(["aboutme"]),u=T("");function e(r){n.value=r,u.value=""}const a=T(null),i={tags:ks,presets:Xs,embeddings:$n,hypernetworks:Ei,aboutme:Kn},o=$(()=>n.value?.length>1?n.value[n.value.length-1].split("/").slice(1):null);function d(r){a.value===r||r==="reset"?a.value=null:a.value=r}function l(r){u.value=r}return Ve(Ct,l),(r,p)=>(v(),k(s(Qe),{class:"container-full-height"},{default:f(()=>[c(s(oa),{class:"bottom-bordered flex mobile-thin-padding"},{default:f(()=>[c(Ga,{search:u.value,"onUpdate:search":p[0]||(p[0]=_=>u.value=_),onExpandCategory:p[1]||(p[1]=_=>d("category")),onExpandCart:p[2]||(p[2]=_=>d("cart"))},null,8,["search"])]),_:1}),c(s(Qe),{class:"p-relative-sm body-inner-full-height"},{default:f(()=>[c(s(Ye),{class:U(["container-full-height","right-bordered","category-aside",{expanded:a.value==="category"}]),width:"284px"},{default:f(()=>[c(s(ne),{class:"body-full-height"},{default:f(()=>[c(Oa,{onSelect:e})]),_:1})]),_:1},8,["class"]),c(s(la),{class:U(["main","body-full-height",{"left-expanded":a.value==="category","right-expanded":a.value==="cart"}]),onClick:p[3]||(p[3]=_=>d("reset"))},{default:f(()=>[u.value===null||u.value===""?(v(),k(Vt,{key:0},[(v(),k(Rt(i[n.value[0]]),{category:s(o)},null,8,["category"]))],1024)):(v(),k(yi,{key:1,search:u.value},null,8,["search"]))]),_:1},8,["class"]),c(s(Ye),{class:U(["container-full-height","left-bordered","cart-aside",{expanded:a.value==="cart"}]),width:"375px"},{default:f(()=>[c(Gu)]),_:1},8,["class"])]),_:1})]),_:1}))}});const wi=O(bi,[["__scopeId","data-v-147f5a6d"]]);function Fi(){const t=va();return St(wi).use(t).provide(ra,{prefix:Date.now(),current:0}).directive("loading",ca).directive("infinite-scroll",da)}Fi().mount("#app");const Ci=J(),$i=Pe(),Di=_e(),Ai=Ee();Ci.load();$i.load();Di.load();Ai.load();{const t=n=>(n.preventDefault(),n.returnValue="Are you sure you want to exit?");window.addEventListener("beforeunload",t)}
